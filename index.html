<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KOSTKU - Sistem Manajemen Kost</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      /* Layanan & Komplain Layout - Tabel di kiri, Chat di kanan */
      .services-page {
        display: grid;
        grid-template-columns: 2fr 1fr; /* Tabel lebih lebar, chat lebih sempit */
        gap: 30px;
      }

      /* Left Column - Tabel Komplain */
      .pending-complaints-section {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
      }

      /* Stats Cards di atas tabel */
      .services-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-bottom: 25px;
      }

      .services-stat-card {
        background-color: white;
        border: 1px solid var(--border-color);
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      }

      .services-stat-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .services-stat-card h3 {
        color: #666;
        font-size: 13px;
        margin-bottom: 8px;
        font-weight: 500;
      }

      .services-stat-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 3px;
      }

      .services-stat-subtitle {
        color: #666;
        font-size: 12px;
      }

      /* Tabel Komplain */
      .complaints-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        flex: 1;
      }

      .complaints-table th {
        background-color: var(--light-blue);
        color: var(--primary-color);
        text-align: left;
        padding: 12px 8px;
        font-weight: 600;
        font-size: 12px;
        border-bottom: 2px solid var(--border-color);
        white-space: nowrap;
      }

      .complaints-table td {
        padding: 10px 8px;
        border-bottom: 1px solid var(--border-color);
        font-size: 12px;
        vertical-align: middle;
      }

      .complaints-table tr:hover {
        background-color: rgba(232, 233, 255, 0.3);
      }

      /* Chat Section - di kanan */
      .chat-section {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .chat-messages {
        flex: 1;
        overflow-y: auto;
        margin-bottom: 20px;
        padding: 15px;
        background-color: var(--chat-bg);
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        max-height: 400px;
      }

      /* Responsive */
      @media (max-width: 1200px) {
        .services-page {
          grid-template-columns: 1fr;
        }

        .chat-section {
          height: 500px;
        }
      }

      @media (max-width: 768px) {
        .services-stats {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 480px) {
        .services-stats {
          grid-template-columns: 1fr;
        }

        .complaints-table {
          display: block;
          overflow-x: auto;
        }
      }
      /* Priority Badges */
      .priority-badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
        display: inline-block;
      }

      .priority-high {
        background-color: rgba(220, 53, 69, 0.1);
        color: var(--danger-color);
        border: 1px solid var(--danger-color);
      }

      .priority-medium {
        background-color: rgba(255, 193, 7, 0.1);
        color: var(--warning-color);
        border: 1px solid var(--warning-color);
      }

      .priority-low {
        background-color: rgba(0, 123, 255, 0.1);
        color: #007bff;
        border: 1px solid #007bff;
      }

      /* Status Badges */
      .status-badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
        display: inline-block;
      }

      .status-processing {
        background-color: rgba(0, 123, 255, 0.1);
        color: #007bff;
        border: 1px solid #007bff;
      }

      .status-pending {
        background-color: rgba(255, 193, 7, 0.1);
        color: var(--warning-color);
        border: 1px solid var(--warning-color);
      }

      .status-completed {
        background-color: rgba(40, 167, 69, 0.1);
        color: var(--success-color);
        border: 1px solid var(--success-color);
      }

      /* Action Button */
      .action-btn {
        padding: 6px 12px;
        background-color: transparent;
        border: 2px solid var(--accent-color);
        color: var(--accent-color);
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 12px;
        font-weight: 500;
      }

      .action-btn:hover {
        background-color: var(--accent-color);
        color: white;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Inter", "Arial", sans-serif;
      }

      :root {
        --primary-color: #150e6a;
        --secondary-color: #ffffff;
        --accent-color: #4a43ec;
        --light-blue: #e8e9ff;
        --gray-color: #f5f5f5;
        --text-color: #333333;
        --border-color: #dddddd;
        --success-color: #28a745;
        --warning-color: #ffc107;
        --danger-color: #dc3545;
        --chat-bg: #f0f2f5;
        --sidebar-width: 250px;
      }

      body {
        min-height: 100vh;
        background-color: var(--gray-color);
        color: var(--text-color);
      }

      /* Notification System */
      .notification-container {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        max-width: 350px;
      }

      .notification {
        background: white;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 12px;
        animation: slideIn 0.3s ease;
        transform: translateX(100%);
        opacity: 0;
        animation-fill-mode: forwards;
        border-left: 4px solid var(--accent-color);
      }

      @keyframes slideIn {
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .notification.success {
        border-left-color: var(--success-color);
      }

      .notification.warning {
        border-left-color: var(--warning-color);
      }

      .notification.error {
        border-left-color: var(--danger-color);
      }

      .notification-icon {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        flex-shrink: 0;
      }

      .notification.success .notification-icon {
        background-color: var(--success-color);
      }

      .notification.warning .notification-icon {
        background-color: var(--warning-color);
      }

      .notification.error .notification-icon {
        background-color: var(--danger-color);
      }

      .notification-info {
        flex: 1;
      }

      .notification-info h4 {
        margin-bottom: 5px;
        color: var(--primary-color);
        font-size: 14px;
      }

      .notification-info p {
        color: #666;
        font-size: 12px;
        line-height: 1.4;
      }

      .notification-close {
        background: none;
        border: none;
        color: #999;
        cursor: pointer;
        font-size: 18px;
        padding: 0;
        line-height: 1;
      }

      /* Login Page */
      .login-page {
        display: flex;
        width: 100%;
        height: 100vh;
        background: linear-gradient(
          135deg,
          var(--primary-color) 0%,
          #2a1f9c 100%
        );
      }

      .login-container {
        display: flex;
        width: 100%;
        height: 100%;
      }

      .login-left {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 50px;
        color: white;
        background: rgba(0, 0, 0, 0.1);
      }

      .login-left h1 {
        font-size: 42px;
        margin-bottom: 20px;
        font-weight: 700;
      }

      .login-left p {
        font-size: 18px;
        line-height: 1.6;
        opacity: 0.9;
      }

      .login-right {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 50px;
        background-color: white;
      }

      .login-form {
        width: 100%;
        max-width: 400px;
      }

      .login-form h2 {
        color: var(--primary-color);
        margin-bottom: 30px;
        text-align: center;
        font-size: 28px;
        font-weight: 600;
      }

      .user-type-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 25px;
      }

      .user-type-btn {
        flex: 1;
        padding: 12px;
        border: 2px solid var(--border-color);
        background: white;
        border-radius: 8px;
        cursor: pointer;
        text-align: center;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .user-type-btn.active {
        border-color: var(--accent-color);
        background-color: var(--light-blue);
        color: var(--accent-color);
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--primary-color);
        font-weight: 500;
      }

      .form-group input {
        width: 100%;
        padding: 15px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s ease;
      }

      .form-group input:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(74, 67, 236, 0.1);
      }

      .login-btn {
        width: 100%;
        padding: 15px;
        background-color: var(--accent-color);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 15px;
      }

      .login-btn:hover {
        background-color: #3a33cc;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(74, 67, 236, 0.2);
      }

      .login-btn:active {
        transform: translateY(0);
      }

      .forgot-password {
        text-align: center;
        color: var(--accent-color);
        text-decoration: none;
        display: block;
        font-size: 14px;
      }

      .forgot-password:hover {
        text-decoration: underline;
      }

      /* Sidebar */
      .sidebar {
        width: var(--sidebar-width);
        background-color: var(--primary-color);
        color: white;
        padding: 20px 0;
        display: flex;
        flex-direction: column;
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        z-index: 100;
        transition: transform 0.3s ease;
      }

      .logo-container {
        padding: 0 20px 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 20px;
      }

      .logo {
        font-size: 24px;
        font-weight: 700;
        color: white;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo i {
        color: #ffd700;
      }

      .sidebar-menu {
        list-style: none;
        padding: 0 15px;
        flex: 1;
      }

      .sidebar-menu li {
        margin-bottom: 5px;
      }

      .sidebar-menu a {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        border-radius: 8px;
        transition: all 0.3s ease;
        gap: 10px;
        font-weight: 500;
      }

      .sidebar-menu a:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: white;
      }

      .sidebar-menu a.active {
        background-color: var(--accent-color);
        color: white;
      }

      .sidebar-menu a i {
        width: 20px;
        text-align: center;
        font-size: 18px;
      }

      .user-profile-sidebar {
        padding: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin-top: auto;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;
      }

      .user-avatar {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .user-details h4 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 3px;
      }

      .user-details p {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.7);
      }

      /* Main Content */
      .main-content {
        margin-left: var(--sidebar-width);
        padding: 25px;
        min-height: 100vh;
        transition: margin-left 0.3s ease;
        background-color: var(--gray-color);
      }

      .menu-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 24px;
        color: var(--primary-color);
        cursor: pointer;
        padding: 10px;
        margin-right: 15px;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: 25px;
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 30px;
      }

      .page-title h1 {
        color: var(--primary-color);
        font-size: 32px;
        margin-bottom: 8px;
        font-weight: 700;
      }

      .page-title p {
        color: #666;
        font-size: 16px;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .notification-bell {
        position: relative;
        background: none;
        border: none;
        font-size: 20px;
        color: var(--primary-color);
        cursor: pointer;
        padding: 8px;
      }

      .notification-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: var(--danger-color);
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .user-profile-header {
        display: flex;
        align-items: center;
        gap: 12px;
        background-color: white;
        padding: 8px 15px;
        border-radius: 50px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        cursor: pointer;
      }

      /* Dashboard Header - Welcome Message */
      .dashboard-welcome {
        background: linear-gradient(135deg, var(--primary-color), #2a1f9c);
        color: white;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        position: relative;
        overflow: hidden;
      }

      .dashboard-welcome::before {
        content: "";
        position: absolute;
        top: -50px;
        right: -50px;
        width: 150px;
        height: 150px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
      }

      .dashboard-welcome h1 {
        font-size: 32px;
        margin-bottom: 10px;
        font-weight: 700;
      }

      .dashboard-welcome p {
        font-size: 16px;
        opacity: 0.9;
        max-width: 600px;
      }

      /* Stats Cards */
      .stats-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        margin-bottom: 35px;
      }

      .stat-card {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
      }

      .stat-card h3 {
        color: #666;
        font-size: 16px;
        margin-bottom: 10px;
        font-weight: 500;
      }

      .stat-value {
        font-size: 36px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 5px;
      }

      .stat-subtitle {
        color: #666;
        font-size: 14px;
      }

      .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 15px;
        background: linear-gradient(135deg, var(--light-blue), #d6d8ff);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--accent-color);
        font-size: 24px;
        margin-bottom: 20px;
        box-shadow: 0 4px 10px rgba(74, 67, 236, 0.15);
      }

      /* Table Styling */
      .table-container {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
        overflow-x: auto;
      }

      .table-container h2 {
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th {
        background-color: var(--light-blue);
        color: var(--primary-color);
        text-align: left;
        padding: 15px;
        font-weight: 600;
        border-bottom: 2px solid var(--border-color);
        white-space: nowrap;
      }

      td {
        padding: 15px;
        border-bottom: 1px solid var(--border-color);
      }

      tr:hover {
        background-color: rgba(232, 233, 255, 0.3);
      }

      /* Status Badges */
      .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        display: inline-block;
      }

      .status-active {
        background-color: rgba(40, 167, 69, 0.1);
        color: var(--success-color);
      }

      .status-pending {
        background-color: rgba(255, 193, 7, 0.1);
        color: var(--warning-color);
      }

      .status-paid {
        background-color: rgba(40, 167, 69, 0.1);
        color: var(--success-color);
      }

      .status-unpaid {
        background-color: rgba(220, 53, 69, 0.1);
        color: var(--danger-color);
      }

      .status-overdue {
        background-color: rgba(220, 53, 69, 0.2);
        color: var(--danger-color);
        border: 1px solid var(--danger-color);
      }

      .status-repair {
        background-color: rgba(255, 193, 7, 0.1);
        color: var(--warning-color);
      }

      .status-completed {
        background-color: rgba(0, 123, 255, 0.1);
        color: #007bff;
      }

      /* Buttons */
      .action-btn {
        padding: 8px 16px;
        background-color: transparent;
        border: 2px solid var(--accent-color);
        color: var(--accent-color);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        font-weight: 500;
      }

      .action-btn:hover {
        background-color: var(--accent-color);
        color: white;
      }

      .primary-btn {
        padding: 12px 24px;
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .primary-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(74, 67, 236, 0.2);
      }

      .secondary-btn {
        padding: 12px 24px;
        background-color: white;
        border: 2px solid var(--border-color);
        color: var(--text-color);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        font-weight: 500;
      }

      .secondary-btn:hover {
        border-color: var(--accent-color);
        color: var(--accent-color);
      }

      /* Checkbox Button */
      .checkbox-btn {
        width: 24px;
        height: 24px;
        background-color: white;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .checkbox-btn.checked {
        background-color: var(--accent-color);
        border-color: var(--accent-color);
        color: white;
      }

      /* Create Invoice Button */
      .create-invoice-btn {
        background-color: white;
        border: 2px dashed var(--border-color);
        color: var(--text-color);
        padding: 20px;
        border-radius: 10px;
        width: 100%;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        font-weight: 500;
        margin-top: 20px;
      }

      .create-invoice-btn:hover {
        border-color: var(--accent-color);
        background-color: var(--light-blue);
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background-color: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        animation: modalSlideIn 0.3s ease;
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--light-blue);
      }

      .modal-header h2 {
        color: var(--primary-color);
        font-size: 24px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 28px;
        color: #999;
        cursor: pointer;
        padding: 0;
        line-height: 1;
      }

      .close-btn:hover {
        color: var(--danger-color);
      }

      /* Form Styles */
      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--primary-color);
        font-weight: 500;
        font-size: 14px;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.3s ease;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(74, 67, 236, 0.1);
      }

      /* Facilities Grid */
      .facilities-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 15px;
        background-color: var(--light-blue);
        border-radius: 8px;
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        padding: 8px;
        border-radius: 6px;
        transition: background-color 0.3s;
      }

      .checkbox-label:hover {
        background-color: rgba(255, 255, 255, 0.5);
      }

      .checkbox-label input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
      }

      /* Form Tabs */
      .form-tabs {
        margin-bottom: 20px;
      }

      .tab-buttons {
        display: flex;
        gap: 5px;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 5px;
      }

      .tab-btn {
        padding: 10px 20px;
        background: none;
        border: none;
        border-bottom: 3px solid transparent;
        color: #666;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .tab-btn.active {
        color: var(--accent-color);
        border-bottom-color: var(--accent-color);
      }

      .tab-btn:hover:not(.active) {
        color: var(--primary-color);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .form-section {
        background: var(--light-blue);
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
      }

      .form-section h4 {
        color: var(--primary-color);
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      /* Responsive Modal */
      @media (max-width: 768px) {
        .modal-content {
          padding: 20px;
          width: 95%;
        }

        .facilities-grid {
          grid-template-columns: 1fr;
        }

        .tab-buttons {
          flex-wrap: wrap;
        }

        .tab-btn {
          flex: 1;
          min-width: 120px;
          text-align: center;
        }
      }

      .modal.active {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        background-color: white;
        border-radius: 15px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        transform: translateY(-20px);
        transition: transform 0.3s ease;
      }

      .modal.active .modal-content {
        transform: translateY(0);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--light-blue);
      }

      .modal-header h2 {
        color: var(--primary-color);
        font-size: 24px;
        font-weight: 600;
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 28px;
        color: #999;
        cursor: pointer;
        padding: 0;
        line-height: 1;
      }

      .close-btn:hover {
        color: var(--danger-color);
      }

      /* Form Elements */
      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: var(--primary-color);
        font-weight: 500;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.3s ease;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: var(--accent-color);
        box-shadow: 0 0 0 3px rgba(74, 67, 236, 0.1);
      }

      .form-group textarea {
        min-height: 100px;
        resize: vertical;
      }

      .form-actions {
        display: flex;
        gap: 15px;
        margin-top: 25px;
      }

      .form-actions .primary-btn {
        flex: 1;
      }

      /* Report Problem Section */
      .report-problem-section {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .report-problem-section h2 {
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: 600;
      }

      .problem-type-selector {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 20px;
      }

      .problem-type-option {
        display: flex;
        align-items: center;
        padding: 15px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .problem-type-option:hover {
        border-color: var(--accent-color);
        background-color: var(--light-blue);
      }

      .problem-type-option.selected {
        border-color: var(--accent-color);
        background-color: var(--light-blue);
      }

      .problem-type-icon {
        width: 40px;
        height: 40px;
        background-color: var(--light-blue);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--accent-color);
        margin-right: 15px;
        font-size: 20px;
      }

      .problem-type-info h4 {
        color: var(--primary-color);
        margin-bottom: 5px;
        font-size: 14px;
        font-weight: 600;
      }

      .problem-type-info p {
        color: #666;
        font-size: 12px;
        line-height: 1.4;
      }

      /* Contact Manager Section */
      .contact-manager-section {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .contact-manager-section h2 {
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: 600;
      }

      .contact-methods {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .contact-method {
        display: flex;
        align-items: center;
        padding: 15px;
        background-color: var(--light-blue);
        border-radius: 10px;
        transition: all 0.3s ease;
      }

      .contact-method:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .contact-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin-right: 15px;
        font-size: 24px;
      }

      .contact-info h4 {
        color: var(--primary-color);
        margin-bottom: 5px;
        font-size: 16px;
        font-weight: 600;
      }

      .contact-info p {
        color: #666;
        font-size: 14px;
      }

      .contact-info a {
        color: var(--accent-color);
        text-decoration: none;
        font-weight: 500;
      }

      .contact-info a:hover {
        text-decoration: underline;
      }

      /* Chat Section */
      .chat-section {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
        height: 500px;
      }

      .chat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--light-blue);
      }

      .chat-header h2 {
        color: var(--primary-color);
        font-weight: 600;
      }

      .chat-status {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 12px;
        color: var(--success-color);
        font-weight: 500;
      }

      .chat-status-dot {
        width: 8px;
        height: 8px;
        background-color: var(--success-color);
        border-radius: 50%;
      }

      .chat-messages {
        flex: 1;
        overflow-y: auto;
        margin-bottom: 20px;
        padding: 15px;
        background-color: var(--chat-bg);
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .message {
        display: flex;
        flex-direction: column;
        max-width: 80%;
      }

      .message.received {
        align-items: flex-start;
      }

      .message.sent {
        align-items: flex-end;
      }

      .message-content {
        padding: 12px 16px;
        border-radius: 18px;
        word-wrap: break-word;
        font-size: 14px;
        line-height: 1.5;
      }

      .message.received .message-content {
        background-color: white;
        border: 1px solid var(--border-color);
        color: var(--text-color);
      }

      .message.sent .message-content {
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        color: white;
      }

      .message-sender {
        font-size: 12px;
        color: #666;
        margin-bottom: 5px;
        font-weight: 500;
      }

      .chat-input {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .chat-input input {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s ease;
      }

      .chat-input input:focus {
        outline: none;
        border-color: var(--accent-color);
      }

      .chat-input button {
        padding: 12px 24px;
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: transform 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .chat-input button:hover {
        transform: translateY(-2px);
      }

      /* Chat Section Styling untuk Owner Services */
      .chat-section .chat-messages {
        flex: 1;
        overflow-y: auto;
        margin-bottom: 20px;
        padding: 15px;
        background-color: var(--chat-bg);
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        max-height: 300px;
      }

      .chat-section .chat-input {
        display: flex;
        gap: 10px;
        align-items: center;
        margin-top: 10px;
      }

      .chat-section .chat-input input {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s ease;
      }

      .chat-section .chat-input input:focus {
        outline: none;
        border-color: var(--accent-color);
      }

      .chat-section .chat-input button {
        padding: 12px 20px;
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: transform 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .chat-section .chat-input button:hover {
        transform: translateY(-2px);
      }

      /* Stats Cards untuk Owner Services */
      .stats-cards {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background-color: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
      }

      .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 15px;
        color: white;
        font-size: 20px;
      }

      .stat-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 5px;
      }

      .stat-subtitle {
        color: #666;
        font-size: 14px;
      }

      /* Chat Header */
      .chat-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .chat-status {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 12px;
        color: var(--success-color);
        font-weight: 500;
      }

      .chat-status-dot {
        width: 8px;
        height: 8px;
        background-color: var(--success-color);
        border-radius: 50%;
      }

      /* Message Styling */
      .message {
        display: flex;
        flex-direction: column;
        max-width: 80%;
      }

      .message.received {
        align-items: flex-start;
      }

      .message.sent {
        align-items: flex-end;
      }

      .message-sender {
        font-size: 11px;
        color: #666;
        margin-bottom: 3px;
        font-weight: 500;
      }

      .message-content {
        padding: 10px 14px;
        border-radius: 18px;
        font-size: 13px;
        line-height: 1.4;
        word-break: break-word;
      }

      .message.received .message-content {
        background-color: white;
        border: 1px solid var(--border-color);
        color: var(--text-color);
      }

      .message.sent .message-content {
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        color: white;
      }

      /* Responsive */
      @media (max-width: 1200px) {
        .profile-container,
        .services-container {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 992px) {
        :root {
          --sidebar-width: 70px;
        }

        .menu-toggle {
          display: block;
        }

        .sidebar {
          transform: translateX(-100%);
        }

        .sidebar.show-sidebar {
          transform: translateX(0);
        }

        .main-content {
          margin-left: 0;
        }

        .sidebar:hover,
        .sidebar.show-sidebar {
          width: 250px;
        }

        .sidebar:hover .logo-text,
        .sidebar.show-sidebar .logo-text,
        .sidebar:hover .menu-text,
        .sidebar.show-sidebar .menu-text,
        .sidebar:hover .user-details,
        .sidebar.show-sidebar .user-details {
          display: block !important;
        }

        .logo-text,
        .menu-text,
        .user-details {
          display: none;
        }

        .sidebar-menu a {
          justify-content: center;
        }

        .sidebar:hover .sidebar-menu a,
        .sidebar.show-sidebar .sidebar-menu a {
          justify-content: flex-start;
        }
      }

      @media (max-width: 768px) {
        .stats-cards {
          grid-template-columns: 1fr;
        }

        .services-stats {
          grid-template-columns: 1fr;
        }

        header {
          flex-direction: column;
          gap: 15px;
          align-items: flex-start;
        }

        .header-actions {
          width: 100%;
          justify-content: space-between;
        }

        .contact-method {
          flex-direction: column;
          text-align: center;
        }

        .contact-icon {
          margin-right: 0;
          margin-bottom: 10px;
        }
      }

      @media (max-width: 576px) {
        .login-container {
          flex-direction: column;
        }

        .login-left,
        .login-right {
          padding: 30px;
        }

        .main-content {
          padding: 15px;
        }

        .form-actions {
          flex-direction: column;
        }

        .form-actions button {
          width: 100%;
        }
      }

      /* Utility Classes */
      .page {
        display: none;
      }

      .page.active {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Divider */
      .divider {
        height: 1px;
        background-color: var(--border-color);
        margin: 30px 0;
        border: none;
      }

      /* Help & Support Page */
      .support-section {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .support-section h2 {
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: 600;
      }

      .faq-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .faq-item {
        border: 2px solid var(--border-color);
        border-radius: 8px;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .faq-item.active {
        border-color: var(--accent-color);
      }

      .faq-question {
        padding: 15px;
        background-color: white;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 500;
        color: var(--primary-color);
      }

      .faq-answer {
        padding: 0 15px;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        background-color: var(--light-blue);
        border-top: 1px solid var(--border-color);
      }

      .faq-item.active .faq-answer {
        padding: 15px;
        max-height: 200px;
      }

      /* Owner Invoice Management */
      .invoice-management {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .invoice-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .invoice-search {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .invoice-search input {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
      }

      .invoice-search button {
        padding: 12px 24px;
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
      }

      .invoice-filters {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .filter-btn {
        padding: 8px 16px;
        background-color: white;
        border: 2px solid var(--border-color);
        border-radius: 20px;
        cursor: pointer;
        font-size: 12px;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .filter-btn.active {
        background-color: var(--accent-color);
        color: white;
        border-color: var(--accent-color);
      }

      .filter-btn:hover {
        border-color: var(--accent-color);
      }

      /* Financial Overview Cards */
      .financial-overview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .financial-card {
        background-color: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      }

      .financial-card h3 {
        color: #666;
        font-size: 14px;
        margin-bottom: 10px;
        font-weight: 500;
      }

      .financial-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 5px;
      }

      .financial-trend {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 12px;
        font-weight: 500;
      }

      .financial-trend.positive {
        color: var(--success-color);
      }

      .financial-trend.negative {
        color: var(--danger-color);
      }

      /* Room Images */
      .room-image {
        width: 100%;
        height: 200px;
        border-radius: 10px;
        object-fit: cover;
        margin-bottom: 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .room-images-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .room-images-grid img {
        width: 100%;
        height: 100px;
        border-radius: 8px;
        object-fit: cover;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .room-images-grid img:hover {
        transform: scale(1.05);
      }

      /* Payment Methods */
      .payment-methods {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .payment-method {
        border: 2px solid var(--border-color);
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .payment-method:hover,
      .payment-method.active {
        border-color: var(--accent-color);
        background-color: var(--light-blue);
      }

      .payment-method i {
        font-size: 24px;
        margin-bottom: 10px;
        color: var(--primary-color);
      }

      .payment-method span {
        display: block;
        font-size: 12px;
        font-weight: 500;
      }

      /* Search Bar */
      .search-bar {
        display: flex;
        gap: 10px;
        margin-bottom: 25px;
      }

      .search-bar input {
        flex: 1;
        padding: 12px 16px;
        border: 2px solid var(--border-color);
        border-radius: 8px;
        font-size: 14px;
      }

      .search-bar button {
        padding: 12px 24px;
        background: linear-gradient(135deg, var(--accent-color), #6c63ff);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
      }

      /* Profile Container */
      .profile-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
      }

      .profile-section {
        background-color: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      }

      .profile-section h2 {
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: 600;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--light-blue);
      }

      .profile-section h3 {
        color: var(--primary-color);
        margin-bottom: 15px;
        font-size: 16px;
        font-weight: 600;
      }

      .info-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border-color);
      }

      .info-label {
        color: #666;
        font-weight: 500;
        font-size: 14px;
        flex: 1;
      }

      .info-value {
        color: var(--text-color);
        font-weight: 500;
        font-size: 14px;
        flex: 1.5;
        text-align: right;
      }
    </style>
  </head>
  <body>
    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Login Page (First Screen) -->
    <div class="login-page" id="loginPage">
      <div class="login-container">
        <div class="login-left">
          <h1>KOSTKU</h1>
          <p>Sistem Manajemen Kost Terintegrasi</p>
          <p style="margin-top: 30px; font-size: 16px">
            Kelola kost Anda dengan mudah dan efisien dalam satu platform yang
            terpadu.
          </p>
        </div>

        <div class="login-right">
          <div class="login-form">
            <h2>Login ke KOSTKU</h2>

            <div class="user-type-selector">
              <button class="user-type-btn active" data-type="owner">
                Pemilik Kost
              </button>
              <button class="user-type-btn" data-type="tenant">
                Penghuni Kost
              </button>
            </div>

            <div class="form-group">
              <label for="username">Username:</label>
              <input
                type="text"
                id="username"
                placeholder="Masukkan username"
                value="admin"
              />
            </div>

            <div class="form-group">
              <label for="password">Password:</label>
              <input
                type="password"
                id="password"
                placeholder="Masukkan Password"
                value="kostku123"
              />
            </div>

            <button class="login-btn" id="loginBtn">Login</button>
            <a
              href="#"
              class="forgot-password"
              onclick="showForgotPasswordModal()"
              >Lupa password?</a
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Main Application (Hidden until login) -->
    <div id="appContainer" style="display: none">
      <!-- Sidebar -->
      <nav class="sidebar" id="sidebar">
        <div class="logo-container">
          <div class="logo">
            <i class="fas fa-home"></i>
            <span class="logo-text">KOSTKU</span>
          </div>
        </div>

        <ul class="sidebar-menu" id="sidebarMenu">
          <!-- Menu items will be dynamically loaded based on user type -->
        </ul>

        <div class="user-profile-sidebar">
          <div class="user-info">
            <div class="user-avatar" id="userAvatar">AM</div>
            <div class="user-details">
              <h4 id="userName">Admin Manager</h4>
              <p id="userRole">Pemilik Kost</p>
            </div>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Header -->
        <header>
          <div style="display: flex; align-items: center">
            <button class="menu-toggle" id="menuToggle">
              <i class="fas fa-bars"></i>
            </button>
            <div class="page-title">
              <h1 id="pageTitle">Dashboard</h1>
              <p id="pageDescription">
                Ringkasan dan statistik sistem manajemen kost
              </p>
            </div>
          </div>

          <div class="header-actions">
            <button
              class="notification-bell"
              id="notificationBell"
              onclick="toggleNotifications()"
            >
              <i class="fas fa-bell"></i>
              <span class="notification-count" id="notificationCount">3</span>
            </button>

            <div class="user-profile-header">
              <div class="user-avatar" id="headerAvatar">AM</div>
              <div>
                <div style="font-weight: 600" id="headerUserName">
                  Admin Manager
                </div>
                <div style="font-size: 12px; color: #666" id="headerUserRole">
                  Pemilik Kost
                </div>
              </div>
              <i class="fas fa-chevron-down"></i>
            </div>
          </div>
        </header>

        <!-- Pages Container -->
        <div id="pagesContainer">
          <!-- Pages will be dynamically loaded based on user type -->
        </div>
      </main>
    </div>

    <!-- Modal Container -->
    <div id="modalContainer"></div>

    <script>
      // Global Variables
      let currentUser = null;
      let currentUserType = "owner";
      let notifications = [];
      let unreadNotifications = 3;

      // User Data - UPDATED WITH COMPLETE INFORMATION
      const users = {
        owner: {
          username: "admin",
          password: "kostku123",
          name: "Rendra Maulana",
          avatar: "RM",
          role: "Pemilik Kost",
          email: "rendra@kostsejahtera.com",
          phone: "0812-3456-7890",
        },
        tenant: {
          username: "ayu",
          password: "ayu123",
          name: "Ayu Lestari",
          avatar: "AL",
          role: "Penghuni Kost - Kamar 101",
          email: "ayu.lestari@yahoo.com",
          phone: "0812-3456-7890",
        },
      };

      // Initialize when DOM is loaded
      document.addEventListener("DOMContentLoaded", function () {
        initializeLogin();
        initializeNotifications();
      });

      function initializeLogin() {
        // User type selector
        const userTypeBtns = document.querySelectorAll(".user-type-btn");
        userTypeBtns.forEach((btn) => {
          btn.addEventListener("click", function () {
            userTypeBtns.forEach((b) => b.classList.remove("active"));
            this.classList.add("active");
            currentUserType = this.dataset.type;

            // Update form placeholder based on user type
            const usernameInput = document.getElementById("username");
            const passwordInput = document.getElementById("password");

            if (currentUserType === "owner") {
              usernameInput.value = "admin";
              passwordInput.value = "kostku123";
              usernameInput.placeholder = "Masukkan username admin";
            } else {
              usernameInput.value = "ayu";
              passwordInput.value = "ayu123";
              usernameInput.placeholder = "Masukkan username penghuni";
            }

            showNotification(
              "info",
              "Tipe Pengguna",
              `Login sebagai ${currentUserType === "owner" ? "Pemilik Kost" : "Penghuni Kost"}`,
            );
          });
        });

        // Login button
        const loginBtn = document.getElementById("loginBtn");
        loginBtn.addEventListener("click", performLogin);

        // Enter key for login
        document
          .getElementById("password")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") performLogin();
          });
      }

      function performLogin() {
        const username = document.getElementById("username").value.trim();
        const password = document.getElementById("password").value.trim();

        if (!username || !password) {
          showNotification(
            "error",
            "Login Gagal",
            "Harap isi username dan password!",
          );
          return;
        }

        // Validate credentials
        const user = users[currentUserType];
        if (username === user.username && password === user.password) {
          loginSuccess(user);
        } else {
          showNotification(
            "error",
            "Login Gagal",
            "Username atau password salah!",
          );
        }
      }

      function loginSuccess(user) {
        currentUser = user;

        // Hide login, show app
        document.getElementById("loginPage").style.display = "none";
        document.getElementById("appContainer").style.display = "block";

        // Update user info
        document.getElementById("userAvatar").textContent = user.avatar;
        document.getElementById("userName").textContent = user.name;
        document.getElementById("userRole").textContent = user.role;
        document.getElementById("headerAvatar").textContent = user.avatar;
        document.getElementById("headerUserName").textContent = user.name;
        document.getElementById("headerUserRole").textContent = user.role;

        // Load appropriate layout
        loadUserLayout(currentUserType);

        // Show welcome notification
        showNotification(
          "success",
          "Login Berhasil",
          `Selamat datang, ${user.name}!`,
        );

        // Initialize menu toggle
        initializeMenuToggle();

        // Initialize charts
        initializeCharts();
      }

      function loadUserLayout(userType) {
        const sidebarMenu = document.getElementById("sidebarMenu");
        const pagesContainer = document.getElementById("pagesContainer");

        if (userType === "owner") {
          // Owner sidebar menu - sesuai gambar pertama
          sidebarMenu.innerHTML = `
                    <li><a href="#" class="menu-item active" data-page="dashboard"><i class="fas fa-tachometer-alt"></i> <span class="menu-text">Dashboard</span></a></li>
                    <li><a href="#" class="menu-item" data-page="profile"><i class="fas fa-user"></i> <span class="menu-text">Profil Pemilik</span></a></li>
                    <li><a href="#" class="menu-item" data-page="manage-kost"><i class="fas fa-building"></i> <span class="menu-text">Kelola Kost</span></a></li>
                    <li><a href="#" class="menu-item" data-page="manage-tenant"><i class="fas fa-users"></i> <span class="menu-text">Kelola Penghuni</span></a></li>
                    <li><a href="#" class="menu-item" data-page="manage-finance"><i class="fas fa-wallet"></i> <span class="menu-text">Kelola Keuangan</span></a></li>
                    <li><a href="#" class="menu-item" data-page="reports"><i class="fas fa-chart-bar"></i> <span class="menu-text">Laporan & Analisis</span></a></li>
                    <li><a href="#" class="menu-item" data-page="services"><i class="fas fa-comments"></i> <span class="menu-text">Layanan & Komplain</span></a></li>
                    <li><a href="#" class="menu-item" data-page="help-support"><i class="fas fa-question-circle"></i> <span class="menu-text">Bantuan & Support</span></a></li>
                    <li><a href="#" class="menu-item" data-page="logout"><i class="fas fa-sign-out-alt"></i> <span class="menu-text">Logout</span></a></li>
                `;

          // Owner pages
          pagesContainer.innerHTML = `
                    <!-- Dashboard -->
                    <div id="dashboard" class="page active">
                        ${getOwnerDashboard()}
                    </div>
                    
                    <!-- Profile -->
                    <div id="profile" class="page">
                        ${getOwnerProfile()}
                    </div>
                    
                    <!-- Manage Kost -->
                    <div id="manage-kost" class="page">
                        ${getManageKost()}
                    </div>
                    
                    <!-- Manage Tenant -->
                    <div id="manage-tenant" class="page">
                        ${getManageTenant()}
                    </div>
                    
                    <!-- Manage Finance -->
                    <div id="manage-finance" class="page">
                        ${getManageFinance()}
                    </div>
                    
                    <!-- Reports -->
                    <div id="reports" class="page">
                        ${getReports()}
                    </div>
                    
                    <!-- Services -->
                    <div id="services" class="page">
                        ${getOwnerServices()}
                    </div>
                    
                    <!-- Help & Support -->
                    <div id="help-support" class="page">
                        ${getHelpSupport()}
                    </div>
                `;
        } else {
          // Tenant sidebar menu - sesuai gambar kedua
          sidebarMenu.innerHTML = `
                    <li><a href="#" class="menu-item active" data-page="dashboard"><i class="fas fa-tachometer-alt"></i> <span class="menu-text">Dashboard</span></a></li>
                    <li><a href="#" class="menu-item" data-page="profile"><i class="fas fa-user"></i> <span class="menu-text">Profil</span></a></li>
                    <li><a href="#" class="menu-item" data-page="room-contract"><i class="fas fa-bed"></i> <span class="menu-text">Kamar & Kontrak</span></a></li>
                    <li><a href="#" class="menu-item" data-page="balance"><i class="fas fa-wallet"></i> <span class="menu-text">Informasi Saldo</span></a></li>
                    <li><a href="#" class="menu-item" data-page="payment"><i class="fas fa-credit-card"></i> <span class="menu-text">Pembayaran</span></a></li>
                    <li><a href="#" class="menu-item" data-page="search-kost"><i class="fas fa-search"></i> <span class="menu-text">Cari Kost</span></a></li>
                    <li><a href="#" class="menu-item" data-page="favorites"><i class="fas fa-heart"></i> <span class="menu-text">Favorit</span></a></li>
                    <li><a href="#" class="menu-item" data-page="services"><i class="fas fa-comments"></i> <span class="menu-text">Layanan</span></a></li>
                    <li><a href="#" class="menu-item" data-page="logout"><i class="fas fa-sign-out-alt"></i> <span class="menu-text">Logout</span></a></li>
                `;

          // Tenant pages
          pagesContainer.innerHTML = `
                    <!-- Dashboard -->
                    <div id="dashboard" class="page active">
                        ${getTenantDashboard()}
                    </div>
                    
                    <!-- Profile -->
                    <div id="profile" class="page">
                        ${getTenantProfile()}
                    </div>
                    
                    <!-- Room & Contract -->
                    <div id="room-contract" class="page">
                        ${getRoomContract()}
                    </div>
                    
                    <!-- Balance -->
                    <div id="balance" class="page">
                        ${getBalanceInfo()}
                    </div>
                    
                    <!-- Payment -->
                    <div id="payment" class="page">
                        ${getPayment()}
                    </div>
                    
                    <!-- Search Kost -->
                    <div id="search-kost" class="page">
                        ${getSearchKost()}
                    </div>
                    
                    <!-- Favorites -->
                    <div id="favorites" class="page">
                        ${getFavorites()}
                    </div>
                    
                    <!-- Services -->
                    <div id="services" class="page">
                        ${getTenantServices()}
                    </div>
                `;
        }

        // Initialize navigation
        initializeNavigation();
      }

      function initializeNavigation() {
        const menuItems = document.querySelectorAll(".menu-item");
        const pages = document.querySelectorAll(".page");

        function showPage(pageId) {
          if (pageId === "logout") {
            logout();
            return;
          }

          pages.forEach((page) => {
            page.classList.remove("active");
          });

          const activePage = document.getElementById(pageId);
          if (activePage) {
            activePage.classList.add("active");
          }

          menuItems.forEach((item) => {
            item.classList.remove("active");
            if (item.getAttribute("data-page") === pageId) {
              item.classList.add("active");
            }
          });

          updatePageTitle(pageId);

          // Show notification for page change
          const pageTitles = {
            dashboard: "Dashboard",
            profile: "Profil",
            "manage-kost": "Kelola Kost",
            "manage-tenant": "Kelola Penghuni",
            "manage-finance": "Kelola Keuangan",
            reports: "Laporan & Analisis",
            services: "Layanan & Komplain",
            "help-support": "Bantuan & Support",
            "room-contract": "Kamar & Kontrak",
            balance: "Informasi Saldo",
            payment: "Pembayaran",
            "search-kost": "Cari Kost",
            favorites: "Favorit",
          };

          if (pageTitles[pageId]) {
            showNotification(
              "info",
              "Navigasi",
              `Membuka halaman ${pageTitles[pageId]}`,
            );
          }
        }

        menuItems.forEach((item) => {
          item.addEventListener("click", function (e) {
            e.preventDefault();
            const pageId = this.getAttribute("data-page");
            showPage(pageId);
          });
        });
      }

      function updatePageTitle(pageId) {
        const titles = {
          dashboard: "Dashboard",
          profile: currentUserType === "owner" ? "Profil Pemilik" : "Profil",
          "manage-kost": "Kelola Kost",
          "manage-tenant": "Kelola Penghuni",
          "manage-finance": "Kelola Keuangan",
          reports: "Laporan & Analisis",
          services:
            currentUserType === "owner" ? "Layanan & Komplain" : "Layanan",
          "help-support": "Bantuan & Support",
          "room-contract": "Kamar & Kontrak",
          balance: "Informasi Saldo",
          payment: "Pembayaran",
          "search-kost": "Cari Kost",
          favorites: "Favorit",
        };

        const descriptions = {
          dashboard:
            currentUserType === "owner"
              ? "Ringkasan dan statistik sistem manajemen kost"
              : "Ringkasan dan informasi kost Anda",
          profile:
            currentUserType === "owner"
              ? "Informasi lengkap pemilik dan bisnis kost"
              : "Informasi pribadi dan data diri",
          "manage-kost": "Kelola data kamar, fasilitas, dan inventaris kost",
          "manage-tenant": "Kelola data penghuni dan status kontrak",
          "manage-finance": "Kelola transaksi, tagihan, dan arus kas kost",
          reports: "Analisis data dan laporan performa kost",
          services:
            currentUserType === "owner"
              ? "Kelola layanan perbaikan dan komplain penghuni"
              : "Hubungi pengelola dan ajukan keluhan",
          "help-support": "Bantuan dan dukungan untuk pengguna sistem",
          "room-contract": "Informasi detail kamar dan kontrak Anda",
          balance: "Kelola dan pantau saldo Anda",
          payment: "Pembayaran sewa dan tagihan kost",
          "search-kost": "Cari dan temukan kost terbaik",
          favorites: "Kost favorit yang Anda simpan",
        };

        document.getElementById("pageTitle").textContent =
          titles[pageId] || "Dashboard";
        document.getElementById("pageDescription").textContent =
          descriptions[pageId] || "";
      }

      function initializeMenuToggle() {
        const menuToggle = document.getElementById("menuToggle");
        const sidebar = document.getElementById("sidebar");

        menuToggle.addEventListener("click", function () {
          sidebar.classList.toggle("show-sidebar");
        });

        // Close sidebar when clicking outside on mobile
        document.addEventListener("click", function (event) {
          if (window.innerWidth <= 992) {
            if (
              !sidebar.contains(event.target) &&
              !menuToggle.contains(event.target)
            ) {
              sidebar.classList.remove("show-sidebar");
            }
          }
        });
      }

      function initializeNotifications() {
        // Sample notifications
        notifications = [
          {
            id: 1,
            title: "Pembayaran Berhasil",
            message: "Pembayaran bulan Maret berhasil diterima",
            type: "success",
            time: "10 menit yang lalu",
            read: false,
          },
          {
            id: 2,
            title: "Tagihan Baru",
            message: "Tagihan bulan April telah tersedia",
            type: "info",
            time: "1 jam yang lalu",
            read: false,
          },
          {
            id: 3,
            title: "Perbaikan Selesai",
            message: "Perbaikan kamar mandi telah selesai",
            type: "success",
            time: "2 jam yang lalu",
            read: false,
          },
          {
            id: 4,
            title: "Pengumuman Liburan",
            message: "Pengumuman libur Lebaran tahun 2024",
            type: "info",
            time: "1 hari yang lalu",
            read: true,
          },
          {
            id: 5,
            title: "Pemadaman Listrik",
            message: "Pemberitahuan pemadaman listrik jadwal perawatan",
            type: "warning",
            time: "2 hari yang lalu",
            read: true,
          },
        ];

        updateNotificationCount();
      }

      function updateNotificationCount() {
        unreadNotifications = notifications.filter((n) => !n.read).length;
        document.getElementById("notificationCount").textContent =
          unreadNotifications;
      }

      function toggleNotifications() {
        const modalContainer = document.getElementById("modalContainer");

        const notificationList = notifications
          .map(
            (notif) => `
                <div class="notification-item ${!notif.read ? "unread" : ""}" onclick="markAsRead(${notif.id})">
                    <div class="notification-icon-small ${notif.type}">
                        <i class="fas fa-${notif.type === "success" ? "check-circle" : notif.type === "warning" ? "exclamation-triangle" : "info-circle"}"></i>
                    </div>
                    <div class="notification-content">
                        <h4>${notif.title}</h4>
                        <p>${notif.message}</p>
                        <div class="notification-time">${notif.time}</div>
                    </div>
                </div>
            `,
          )
          .join("");

        const modalHTML = `
                <div class="modal active">
                    <div class="modal-content" style="max-width: 500px;">
                        <div class="modal-header">
                            <h2>Notifikasi</h2>
                            <button class="close-btn" onclick="closeModal()">&times;</button>
                        </div>
                        <div style="max-height: 400px; overflow-y: auto;">
                            ${notificationList}
                        </div>
                        <div class="form-actions">
                            <button class="secondary-btn" onclick="markAllAsRead()">Tandai Semua Dibaca</button>
                        </div>
                    </div>
                </div>
            `;

        modalContainer.innerHTML = modalHTML;
        showNotification("info", "Notifikasi", "Membuka daftar notifikasi");
      }

      function markAsRead(id) {
        const notification = notifications.find((n) => n.id === id);
        if (notification && !notification.read) {
          notification.read = true;
          updateNotificationCount();
          toggleNotifications(); // Refresh notification modal
          showNotification(
            "success",
            "Notifikasi",
            "Notifikasi telah ditandai sebagai dibaca",
          );
        }
      }

      function markAllAsRead() {
        notifications.forEach((n) => (n.read = true));
        updateNotificationCount();
        closeModal();
        showNotification(
          "success",
          "Notifikasi",
          "Semua notifikasi telah ditandai sebagai dibaca",
        );
      }

      function showNotification(type, title, message) {
        const container = document.getElementById("notificationContainer");
        const notificationId = "notif-" + Date.now();

        const icons = {
          success: "check-circle",
          error: "exclamation-circle",
          warning: "exclamation-triangle",
          info: "info-circle",
        };

        const notificationHTML = `
                <div class="notification ${type}" id="${notificationId}">
                    <div class="notification-icon">
                        <i class="fas fa-${icons[type]}"></i>
                    </div>
                    <div class="notification-info">
                        <h4>${title}</h4>
                        <p>${message}</p>
                    </div>
                    <button class="notification-close" onclick="closeNotification('${notificationId}')">&times;</button>
                </div>
            `;

        container.insertAdjacentHTML("afterbegin", notificationHTML);

        // Auto remove after 5 seconds
        setTimeout(() => {
          closeNotification(notificationId);
        }, 5000);
      }

      function closeNotification(id) {
        const notification = document.getElementById(id);
        if (notification) {
          notification.style.opacity = "0";
          notification.style.transform = "translateX(100%)";
          setTimeout(() => notification.remove(), 300);
        }
      }

      function closeModal() {
        const modal = document.querySelector(".modal.active");
        if (modal) {
          modal.classList.remove("active");
          setTimeout(() => modal.remove(), 300);
        }
      }

      function logout() {
        showNotification("info", "Logout", "Anda telah logout dari sistem");
        setTimeout(() => {
          document.getElementById("appContainer").style.display = "none";
          document.getElementById("loginPage").style.display = "flex";
          document.getElementById("username").value = "";
          document.getElementById("password").value = "";
        }, 1000);
      }

      // Chart initialization
      function initializeCharts() {
        // Owner Revenue Chart
        const revenueCtx = document.getElementById("revenueChart");
        if (revenueCtx) {
          new Chart(revenueCtx, {
            type: "line",
            data: {
              labels: ["Jan", "Feb", "Mar", "Apr", "Mei", "Jun"],
              datasets: [
                {
                  label: "Pendapatan (Juta)",
                  data: [12, 15, 14, 18, 16, 20],
                  borderColor: "#4A43EC",
                  backgroundColor: "rgba(74, 67, 236, 0.1)",
                  tension: 0.3,
                  fill: true,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  display: false,
                },
              },
              scales: {
                y: {
                  beginAtZero: true,
                  grid: {
                    color: "rgba(0,0,0,0.05)",
                  },
                },
                x: {
                  grid: {
                    display: false,
                  },
                },
              },
            },
          });
        }

        // Occupancy Chart
        const occupancyCtx = document.getElementById("occupancyChart");
        if (occupancyCtx) {
          new Chart(occupancyCtx, {
            type: "doughnut",
            data: {
              labels: ["Terisi", "Kosong", "Perbaikan"],
              datasets: [
                {
                  data: [12, 3, 2],
                  backgroundColor: ["#28a745", "#007bff", "#ffc107"],
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  position: "bottom",
                },
              },
            },
          });
        }

        // Tenant Spending Chart
        const spendingCtx = document.getElementById("spendingChart");
        if (spendingCtx) {
          new Chart(spendingCtx, {
            type: "bar",
            data: {
              labels: ["Jan", "Feb", "Mar", "Apr"],
              datasets: [
                {
                  label: "Pengeluaran",
                  data: [850000, 900000, 800000, 950000],
                  backgroundColor: "#4A43EC",
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  display: false,
                },
              },
              scales: {
                y: {
                  beginAtZero: true,
                  ticks: {
                    callback: function (value) {
                      return "Rp " + (value / 1000).toFixed(0) + "k";
                    },
                  },
                },
              },
            },
          });
        }
      }

      // Page Templates - UPDATED PROFILES
      function getOwnerDashboard() {
        return `
                <div class="dashboard-welcome">
                    <h1>Selamat Datang, Rendra!</h1>
                    <p>Kelola kost Anda dengan mudah dan efisien dalam satu platform terpadu</p>
                </div>
                
                <div class="table-container">
                    <h2>Tagihan Tertunggak</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Nama</th>
                                <th>Kamar</th>
                                <th>Jumlah</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ayu Lestari</td>
                                <td>Kamar 101</td>
                                <td>Rp 850.000</td>
                                <td><span class="status-badge status-unpaid">Belum Bayar</span></td>
                                <td><div class="checkbox-btn" onclick="toggleCheckbox(this)"><i class="fas fa-check"></i></div></td>
                            </tr>
                            <tr>
                                <td>Saepul Bahri</td>
                                <td>Kamar 8</td>
                                <td>Rp 1.800.000</td>
                                <td><span class="status-badge status-overdue">Tunggak 3 Hari</span></td>
                                <td><div class="checkbox-btn" onclick="toggleCheckbox(this)"><i class="fas fa-check"></i></div></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <button class="create-invoice-btn" onclick="showCreateInvoiceModal()">
                        <i class="fas fa-plus"></i> Tambah Tagihan
                    </button>
                </div>
                
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <h3>Kamar Tersedia</h3>
                        <div class="stat-value">3</div>
                        <div class="stat-subtitle">Kamar kosong siap ditempati</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Total Penghuni</h3>
                        <div class="stat-value">12</div>
                        <div class="stat-subtitle">Penghuni aktif</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h3>Rata-rata Lama Tinggal</h3>
                        <div class="stat-value">14</div>
                        <div class="stat-subtitle">Bulan</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3>Kepuasan Penghuni</h3>
                        <div class="stat-value">4.5</div>
                        <div class="stat-subtitle">/5.0</div>
                    </div>
                </div>
            `;
      }

      // UPDATED: Owner Profile with Complete Information
      function getOwnerProfile() {
        return `
                <div class="profile-container">
                    <div class="profile-section">
                        <h2>Profil Pemilik Kost</h2>
                        <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 2px solid var(--light-blue);">
                            <div class="user-avatar" style="width: 80px; height: 80px; font-size: 32px; background: linear-gradient(135deg, var(--accent-color), #6C63FF);">RM</div>
                            <div>
                                <h3 style="color: var(--primary-color); margin-bottom: 5px;">Rendra Maulana</h3>
                                <p style="color: #666; font-size: 14px;">Pemilik & Pengelola Kost</p>
                                <p style="color: var(--accent-color); font-size: 12px; margin-top: 5px;">
                                    <i class="fas fa-shield-alt"></i> Akun Terverifikasi
                                </p>
                            </div>
                        </div>
                        
                        <h3 style="color: var(--primary-color); margin-bottom: 15px;">Data Bisnis</h3>
                        <div class="info-row">
                            <div class="info-label">Nama Kost</div>
                            <div class="info-value">Kost Sejahtera Abadi</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Alamat Lengkap</div>
                            <div class="info-value">Jl. Mawar No. 123, Kel. Melati, Kec. Sukajadi, Bandung 40123</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">No. Telepon Kost</div>
                            <div class="info-value">(022) 1234-5678</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tahun Berdiri</div>
                            <div class="info-value">2018</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Jumlah Kamar</div>
                            <div class="info-value">15 Kamar</div>
                        </div>
                        
                        <h3 style="color: var(--primary-color); margin-top: 25px; margin-bottom: 15px;">Informasi Rekening</h3>
                        <div class="info-row">
                            <div class="info-label">Bank</div>
                            <div class="info-value">BCA (Bank Central Asia)</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">No. Rekening</div>
                            <div class="info-value">123-456-7890</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Atas Nama</div>
                            <div class="info-value">RENDRA MAULANA</div>
                        </div>
                        
                        <button class="primary-btn" style="margin-top: 30px; width: 100%;" onclick="showEditProfileModal('owner')">
                            <i class="fas fa-edit"></i> Edit Profil
                        </button>
                    </div>
                    
                    <div class="profile-section">
                        <h2>Identitas Pemilik</h2>
                        <div class="info-row">
                            <div class="info-label">NIK</div>
                            <div class="info-value">3273011501980001</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Nama Lengkap</div>
                            <div class="info-value">Rendra Maulana</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tempat/Tgl Lahir</div>
                            <div class="info-value">Bandung, 15 Januari 1980</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Jenis Kelamin</div>
                            <div class="info-value">Laki-laki</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">No. Telepon Pribadi</div>
                            <div class="info-value">0812-3456-7890</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Email</div>
                            <div class="info-value">rendra@kostsejahtera.com</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Alamat Domisili</div>
                            <div class="info-value">Jl. Kenanga No. 45, Bandung</div>
                        </div>
                        
                        <h3 style="color: var(--primary-color); margin-top: 25px; margin-bottom: 15px;">Dokumen Legal</h3>
                        <div class="info-row">
                            <div class="info-label">Izin Usaha (SIUP)</div>
                            <div class="info-value">SIUP/123/XYZ/2023</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tanggal Berlaku</div>
                            <div class="info-value">15 Januari 2023 - 14 Januari 2028</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">PBH (Pendaftaran Bangunan Hunian)</div>
                            <div class="info-value">PBH/B46/XYZ/2023</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">IMB (Izin Mendirikan Bangunan)</div>
                            <div class="info-value">IMB/789/XYZ/2018</div>
                        </div>
                        
                        <div style="margin-top: 25px; padding: 15px; background-color: var(--light-blue); border-radius: 10px;">
                            <h4 style="color: var(--primary-color); margin-bottom: 10px;">
                                <i class="fas fa-info-circle"></i> Status Verifikasi
                            </h4>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span>Akun Terverifikasi</span>
                                <span class="status-badge status-active">Aktif</span>
                            </div>
                            <p style="font-size: 12px; color: #666; margin-top: 10px;">
                                Terakhir diperbarui: 15 Maret 2024
                            </p>
                        </div>
                    </div>
                </div>
            `;
      }

      // UPDATED: Tenant Profile with Complete Information
      function getTenantProfile() {
        return `
                <div class="profile-container">
                    <div class="profile-section">
                        <h2>Profil Penghuni</h2>
                        <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 2px solid var(--light-blue);">
                            <div class="user-avatar" style="width: 80px; height: 80px; font-size: 32px; background: linear-gradient(135deg, #FF6B6B, #FF8E8E);">AL</div>
                            <div>
                                <h3 style="color: var(--primary-color); margin-bottom: 5px;">Ayu Lestari</h3>
                                <p style="color: #666; font-size: 14px;">Penghuni Kamar 101</p>
                                <p style="color: var(--accent-color); font-size: 12px; margin-top: 5px;">
                                    <i class="fas fa-star"></i> Penghuni Teladan
                                </p>
                            </div>
                        </div>
                        
                        <h3 style="color: var(--primary-color); margin-bottom: 15px;">Informasi Pribadi</h3>
                        <div class="info-row">
                            <div class="info-label">Nama Lengkap</div>
                            <div class="info-value">Ayu Lestari</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">NIK</div>
                            <div class="info-value">3273010603050002</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tempat/Tgl Lahir</div>
                            <div class="info-value">Jakarta, 6 Maret 2005</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Jenis Kelamin</div>
                            <div class="info-value">Perempuan</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Status</div>
                            <div class="info-value">Mahasiswa</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Universitas</div>
                            <div class="info-value">Universitas Pendidikan Indonesia</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Jurusan</div>
                            <div class="info-value">Sistem Informasi</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Semester</div>
                            <div class="info-value">6</div>
                        </div>
                        
                        <h3 style="color: var(--primary-color); margin-top: 25px; margin-bottom: 15px;">Kontak & Media Sosial</h3>
                        <div class="info-row">
                            <div class="info-label">Email</div>
                            <div class="info-value">ayu.lestari@yahoo.com</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">No. Telepon</div>
                            <div class="info-value">0812-3456-7890</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Kontak Darurat</div>
                            <div class="info-value">Ibu Sari (0895-2345-4678)</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Hubungan</div>
                            <div class="info-value">Ibu Kandung</div>
                        </div>
                        
                        <button class="primary-btn" style="margin-top: 30px; width: 100%;" onclick="showEditProfileModal('tenant')">
                            <i class="fas fa-edit"></i> Edit Profil
                        </button>
                    </div>
                    
                    <div class="profile-section">
                        <h2>Informasi Kost</h2>
                        <div class="info-row">
                            <div class="info-label">Nomor Kamar</div>
                            <div class="info-value">101</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tipe Kamar</div>
                            <div class="info-value">Standar (3x4 m)</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Lantai</div>
                            <div class="info-value">1</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Fasilitas Kamar</div>
                            <div class="info-value">Kamar mandi dalam, AC, WiFi, Kasur, Lemari, Meja belajar</div>
                        </div>
                        
                        <h3 style="color: var(--primary-color); margin-top: 25px; margin-bottom: 15px;">Detail Kontrak</h3>
                        <div class="info-row">
                            <div class="info-label">No. Kontrak</div>
                            <div class="info-value">KTR/2023/101/AL</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tanggal Mulai</div>
                            <div class="info-value">15 Januari 2023</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tanggal Berakhir</div>
                            <div class="info-value">14 Januari 2024</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Durasi</div>
                            <div class="info-value">12 Bulan</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Sisa Kontrak</div>
                            <div class="info-value">45 Hari</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Harga Sewa</div>
                            <div class="info-value">Rp 850.000 / bulan</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Deposit</div>
                            <div class="info-value">Rp 1.700.000 (2 bulan)</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Status Deposit</div>
                            <div class="info-value"><span class="status-badge status-paid">Tersedia untuk pengembalian</span></div>
                        </div>
                        
                        <h3 style="color: var(--primary-color); margin-top: 25px; margin-bottom: 15px;">Riwayat Pembayaran</h3>
                        <div class="info-row">
                            <div class="info-label">Status Terakhir</div>
                            <div class="info-value"><span class="status-badge status-paid">Lunas hingga Maret 2024</span></div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Tagihan Bulan Ini</div>
                            <div class="info-value">Rp 850.000 (Jatuh tempo: 5 April 2024)</div>
                        </div>
                        <div class="info-row">
                            <div class="info-label">Metode Pembayaran</div>
                            <div class="info-value">Transfer Bank (BCA)</div>
                        </div>
                        
                        <div style="margin-top: 25px; padding: 15px; background-color: var(--light-blue); border-radius: 10px;">
                            <h4 style="color: var(--primary-color); margin-bottom: 10px;">
                                <i class="fas fa-history"></i> Status Penghuni
                            </h4>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span>Status Aktif</span>
                                <span class="status-badge status-active">Aktif</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
                                <span>Riwayat Pembayaran</span>
                                <span class="status-badge status-paid">Tepat waktu</span>
                            </div>
                            <p style="font-size: 12px; color: #666; margin-top: 10px;">
                                Bergabung sejak: 15 Januari 2023
                            </p>
                        </div>
                    </div>
                </div>
            `;
      }

      function getManageKost() {
        return `
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-bed"></i>
                </div>
                <h3>Kamar Tersedia</h3>
                <div class="stat-value">3</div>
                <div class="stat-subtitle">Kamar kosong siap ditempati</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-home"></i>
                </div>
                <h3>Total Kamar</h3>
                <div class="stat-value">15</div>
                <div class="stat-subtitle">Kamar di kost</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-tools"></i>
                </div>
                <h3>Perbaikan</h3>
                <div class="stat-value">2</div>
                <div class="stat-subtitle">Kamar dalam perbaikan</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <h3>Occupancy Rate</h3>
                <div class="stat-value">80%</div>
                <div class="stat-subtitle">Tingkat hunian</div>
            </div>
        </div>
        
        <div class="table-container">
            <h2>Daftar Kamar
                <button class="primary-btn" onclick="showAddRoomModal()">
                    <i class="fas fa-plus"></i> Tambah Kamar
                </button>
            </h2>
            <table>
                <thead>
                    <tr>
                        <th>No. Kamar</th>
                        <th>Tipe</th>
                        <th>Luas</th>
                        <th>Fasilitas</th>
                        <th>Harga/bulan</th>
                        <th>Status</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>101</td>
                        <td>Standar</td>
                        <td>3 x 4 m</td>
                        <td>Kamar Mandi, Kipas angin</td>
                        <td>Rp 850.000</td>
                        <td><span class="status-badge status-active">Terisi</span></td>
                        <td><button class="action-btn" onclick="showRoomDetail('101')">Detail</button></td>
                    </tr>
                    <tr>
                        <td>102</td>
                        <td>Deluxe</td>
                        <td>4 x 4 m</td>
                        <td>Kamar Mandi, AC, Parkiran</td>
                        <td>Rp 1.200.000</td>
                        <td><span class="status-badge status-paid">Kosong</span></td>
                        <td><button class="action-btn" onclick="showRoomDetail('102')">Detail</button></td>
                    </tr>
                    <tr>
                        <td>103</td>
                        <td>Standar</td>
                        <td>3 x 4 m</td>
                        <td>Kamar Mandi, Kipas angin</td>
                        <td>Rp 850.000</td>
                        <td><span class="status-badge status-repair">Perbaikan</span></td>
                        <td><button class="action-btn" onclick="showRoomDetail('103')">Detail</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- MODAL TAMBAH KAMAR -->
        <div id="addRoomModal" class="modal">
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                    <h2><i class="fas fa-plus"></i> Tambah Kamar Baru</h2>
                    <button class="close-btn" onclick="closeAddRoomModal()">&times;</button>
                </div>
                
                <div class="modal-body">
                    <form id="addRoomForm">
                        <div class="form-group">
                            <label for="roomNumber">Nomor Kamar *</label>
                            <input type="text" id="roomNumber" placeholder="Contoh: 104, 201, 305" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="roomType">Tipe Kamar *</label>
                            <select id="roomType" required>
                                <option value="">Pilih Tipe Kamar</option>
                                <option value="standard">Standar</option>
                                <option value="deluxe">Deluxe</option>
                                <option value="superior">Superior</option>
                                <option value="executive">Executive</option>
                            </select>
                        </div>
                        
                        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label for="roomLength">Panjang (m) *</label>
                                <input type="number" id="roomLength" min="1" step="0.5" placeholder="3" required>
                            </div>
                            <div class="form-group">
                                <label for="roomWidth">Lebar (m) *</label>
                                <input type="number" id="roomWidth" min="1" step="0.5" placeholder="4" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="roomPrice">Harga per Bulan *</label>
                            <div style="display: flex; align-items: center;">
                                <span style="background: var(--light-blue); padding: 12px; border-radius: 8px 0 0 8px; border: 2px solid var(--border-color); border-right: none;">Rp</span>
                                <input type="number" id="roomPrice" style="border-radius: 0 8px 8px 0; margin-left: 0;" placeholder="850000" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Fasilitas Kamar</label>
                            <div class="facilities-grid">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="ac"> AC
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="wifi"> WiFi
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="bathroom"> Kamar Mandi Dalam
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="kitchen"> Dapur Bersama
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="parking"> Parkiran
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="laundry"> Laundry
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="tv"> TV
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="facilities" value="fridge"> Kulkas
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="roomStatus">Status Awal *</label>
                            <select id="roomStatus" required>
                                <option value="empty">Kosong</option>
                                <option value="occupied">Terisi</option>
                                <option value="repair">Perbaikan</option>
                                <option value="reserved">Dipesan</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="roomDescription">Deskripsi Tambahan</label>
                            <textarea id="roomDescription" rows="3" placeholder="Tambahkan catatan tentang kamar ini..."></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="secondary-btn" onclick="closeAddRoomModal()">Batal</button>
                            <button type="button" class="primary-btn" onclick="saveNewRoom(event)">
                                <i class="fas fa-save"></i> Simpan Kamar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    `;
      }
      
      function getManageTenant() {
        return `
        <div class="stats-cards">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Total Penghuni</h3>
                <div class="stat-value">12</div>
                <div class="stat-subtitle">Aktif</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <h3>Kontrak Berakhir</h3>
                <div class="stat-value">3</div>
                <div class="stat-subtitle">Bulan ini</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-star"></i>
                </div>
                <h3>Kepuasan</h3>
                <div class="stat-value">4.5</div>
                <div class="stat-subtitle">/5.0</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-user-clock"></i>
                </div>
                <h3>Retensi</h3>
                <div class="stat-value">85%</div>
                <div class="stat-subtitle">Tingkat retensi</div>
            </div>
        </div>
        
        <div class="table-container">
            <h2>Data Penghuni Aktif
                <button class="primary-btn" onclick="showAddTenantModal()">
                    <i class="fas fa-user-plus"></i> Tambah Penghuni
                </button>
            </h2>
            <table>
                <thead>
                    <tr>
                        <th>Nama</th>
                        <th>Kamar</th>
                        <th>Telepon</th>
                        <th>Mulai Kontrak</th>
                        <th>Akhir Kontrak</th>
                        <th>Status</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Ayu Lestari</td>
                        <td>101</td>
                        <td>0812-3456-7890</td>
                        <td>15 Jan 2023</td>
                        <td>14 Jan 2024</td>
                        <td><span class="status-badge status-active">Aktif</span></td>
                        <td><button class="action-btn" onclick="showTenantDetail('Ayu Lestari')">Detail</button></td>
                    </tr>
                    <tr>
                        <td>Budi Santoso</td>
                        <td>102</td>
                        <td>0812-7853-8420</td>
                        <td>1 Mar 2023</td>
                        <td>28 Feb 2024</td>
                        <td><span class="status-badge status-active">Aktif</span></td>
                        <td><button class="action-btn" onclick="showTenantDetail('Budi Santoso')">Detail</button></td>
                    </tr>
                    <tr>
                        <td>Citra Dewi</td>
                        <td>103</td>
                        <td>0813-9876-5432</td>
                        <td>10 Apr 2023</td>
                        <td>9 Apr 2024</td>
                        <td><span class="status-badge status-pending">Menunggu</span></td>
                        <td><button class="action-btn" onclick="showTenantDetail('Citra Dewi')">Detail</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- MODAL TAMBAH PENGHUNI -->
        <div id="addTenantModal" class="modal">
            <div class="modal-content" style="max-width: 700px;">
                <div class="modal-header">
                    <h2><i class="fas fa-user-plus"></i> Tambah Penghuni Baru</h2>
                    <button class="close-btn" onclick="closeAddTenantModal()">&times;</button>
                </div>
                
                <div class="modal-body">
                    <form id="addTenantForm">
                        <div class="form-tabs">
                            <div class="tab-buttons">
                                <button type="button" class="tab-btn active" onclick="switchTab(1)">Data Pribadi</button>
                                <button type="button" class="tab-btn" onclick="switchTab(2)">Data Kontrak</button>
                                <button type="button" class="tab-btn" onclick="switchTab(3)">Kontak & Darurat</button>
                            </div>
                            
                            <!-- TAB 1: Data Pribadi -->
                            <div class="tab-content active" id="tab1">
                                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="form-group">
                                        <label for="tenantName">Nama Lengkap *</label>
                                        <input type="text" id="tenantName" placeholder="Contoh: Ahmad Fauzi" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="tenantNIK">NIK *</label>
                                        <input type="text" id="tenantNIK" placeholder="16 digit NIK" required>
                                    </div>
                                </div>
                                
                                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="form-group">
                                        <label for="tenantBirthplace">Tempat Lahir *</label>
                                        <input type="text" id="tenantBirthplace" placeholder="Kota Lahir" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="tenantBirthdate">Tanggal Lahir *</label>
                                        <input type="date" id="tenantBirthdate" required>
                                    </div>
                                </div>
                                
                                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="form-group">
                                        <label for="tenantGender">Jenis Kelamin *</label>
                                        <select id="tenantGender" required>
                                            <option value="">Pilih Jenis Kelamin</option>
                                            <option value="male">Laki-laki</option>
                                            <option value="female">Perempuan</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="tenantOccupation">Pekerjaan *</label>
                                        <select id="tenantOccupation" required>
                                            <option value="">Pilih Pekerjaan</option>
                                            <option value="student">Mahasiswa/Pelajar</option>
                                            <option value="employee">Karyawan</option>
                                            <option value="entrepreneur">Wirausaha</option>
                                            <option value="professional">Profesional</option>
                                            <option value="other">Lainnya</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- TAB 2: Data Kontrak -->
                            <div class="tab-content" id="tab2">
                                <div class="form-group">
                                    <label for="tenantRoom">Pilih Kamar *</label>
                                    <select id="tenantRoom" required>
                                        <option value="">Pilih Nomor Kamar</option>
                                        <option value="104">104 (Kosong - Rp 850.000)</option>
                                        <option value="105">105 (Kosong - Rp 900.000)</option>
                                        <option value="201">201 (Kosong - Rp 1.000.000)</option>
                                        <option value="202">202 (Kosong - Rp 1.200.000)</option>
                                    </select>
                                </div>
                                
                                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="form-group">
                                        <label for="contractStart">Mulai Kontrak *</label>
                                        <input type="date" id="contractStart" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="contractEnd">Akhir Kontrak *</label>
                                        <input type="date" id="contractEnd" required>
                                    </div>
                                </div>
                                
                                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="form-group">
                                        <label for="monthlyRent">Sewa per Bulan *</label>
                                        <input type="number" id="monthlyRent" placeholder="850000" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="deposit">Deposit *</label>
                                        <input type="number" id="deposit" placeholder="1700000" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="paymentMethod">Metode Pembayaran</label>
                                    <select id="paymentMethod">
                                        <option value="transfer">Transfer Bank</option>
                                        <option value="cash">Tunai</option>
                                        <option value="kost-balance">Saldo Kost</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- TAB 3: Kontak & Darurat -->
                            <div class="tab-content" id="tab3">
                                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div class="form-group">
                                        <label for="tenantEmail">Email *</label>
                                        <input type="email" id="tenantEmail" placeholder="contoh@email.com" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="tenantPhone">No. Telepon *</label>
                                        <input type="tel" id="tenantPhone" placeholder="0812-3456-7890" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="tenantAddress">Alamat Asal</label>
                                    <textarea id="tenantAddress" rows="2" placeholder="Alamat lengkap sebelum kost"></textarea>
                                </div>
                                
                                <div class="form-section" style="background: var(--light-blue); padding: 15px; border-radius: 8px; margin: 15px 0;">
                                    <h4 style="color: var(--primary-color); margin-bottom: 10px;">
                                        <i class="fas fa-exclamation-triangle"></i> Kontak Darurat
                                    </h4>
                                    
                                    <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                        <div class="form-group">
                                            <label for="emergencyName">Nama Kontak Darurat *</label>
                                            <input type="text" id="emergencyName" placeholder="Nama keluarga/teman" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="emergencyRelation">Hubungan *</label>
                                            <input type="text" id="emergencyRelation" placeholder="Orang tua/saudara" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                        <div class="form-group">
                                            <label for="emergencyPhone">No. Telepon Darurat *</label>
                                            <input type="tel" id="emergencyPhone" placeholder="0813-xxxx-xxxx" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="emergencyAddress">Alamat Kontak Darurat</label>
                                            <input type="text" id="emergencyAddress" placeholder="Alamat lengkap">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions" style="margin-top: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <button type="button" class="secondary-btn" onclick="closeAddTenantModal()">Batal</button>
                                    <button type="button" class="secondary-btn" onclick="previousTab()" id="prevBtn" style="display: none;">
                                        <i class="fas fa-arrow-left"></i> Sebelumnya
                                    </button>
                                </div>
                                <div>
                                    <button type="button" class="primary-btn" onclick="nextTab()" id="nextBtn">
                                        Selanjutnya <i class="fas fa-arrow-right"></i>
                                    </button>
                                    <button type="button" class="primary-btn" id="submitBtn" style="display: none;" onclick="saveNewTenant(event)">
                                        <i class="fas fa-save"></i> Simpan Penghuni
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    `;
      }

      function getManageFinance() {
        return `
                <div class="financial-overview">
                    <div class="financial-card">
                        <h3>Total Pendapatan</h3>
                        <div class="financial-value">Rp15.2JT</div>
                        <div class="financial-trend positive">
                            <i class="fas fa-arrow-up"></i> 12% vs bulan lalu
                        </div>
                    </div>
                    
                    <div class="financial-card">
                        <h3>Saldo Saat Ini</h3>
                        <div class="financial-value">Rp28.7JT</div>
                        <div class="financial-trend positive">
                            <i class="fas fa-arrow-up"></i> 8% vs bulan lalu
                        </div>
                    </div>
                    
                    <div class="financial-card">
                        <h3>Pengeluaran</h3>
                        <div class="financial-value">Rp5.4JT</div>
                        <div class="financial-trend negative">
                            <i class="fas fa-arrow-down"></i> 5% vs bulan lalu
                        </div>
                    </div>
                    
                    <div class="financial-card">
                        <h3>Tagihan Tertunda</h3>
                        <div class="financial-value">2</div>
                        <div class="financial-trend negative">
                            <i class="fas fa-exclamation-circle"></i> Perlu penagihan
                        </div>
                    </div>
                </div>
                
                <div class="invoice-management">
                    <div class="invoice-header">
                        <h2 style="color: var(--primary-color);">Manajemen Tagihan</h2>
                        <button class="primary-btn" onclick="showCreateInvoiceModal()">
                            <i class="fas fa-plus"></i> Buat Tagihan Baru
                        </button>
                    </div>
                    
                    <div class="invoice-search">
                        <input type="text" placeholder="Cari tagihan berdasarkan nama atau kamar...">
                        <button class="primary-btn">
                            <i class="fas fa-search"></i> Cari
                        </button>
                    </div>
                    
                    <div class="invoice-filters">
                        <button class="filter-btn active">Semua</button>
                        <button class="filter-btn">Belum Bayar</button>
                        <button class="filter-btn">Lunas</button>
                        <button class="filter-btn">Tunggak</button>
                        <button class="filter-btn">Bulan Ini</button>
                    </div>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>No. Tagihan</th>
                                <th>Nama</th>
                                <th>Kamar</th>
                                <th>Jumlah</th>
                                <th>Jatuh Tempo</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>INV-2024-001</td>
                                <td>Ayu Lestari</td>
                                <td>Kamar 101</td>
                                <td>Rp 850.000</td>
                                <td>5 April 2024</td>
                                <td><span class="status-badge status-unpaid">Belum Bayar</span></td>
                                <td>
                                    <button class="action-btn" onclick="viewInvoice('INV-2024-001')">Lihat</button>
                                    <button class="action-btn" style="margin-left: 5px;" onclick="sendReminder('Ayu Lestari')">
                                        <i class="fas fa-bell"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>INV-2024-002</td>
                                <td>Saepul Bahri</td>
                                <td>Kamar 8</td>
                                <td>Rp 1.800.000</td>
                                <td>2 April 2024</td>
                                <td><span class="status-badge status-overdue">Tunggak 3 Hari</span></td>
                                <td>
                                    <button class="action-btn" onclick="viewInvoice('INV-2024-002')">Lihat</button>
                                    <button class="action-btn" style="margin-left: 5px; background-color: var(--danger-color); color: white; border-color: var(--danger-color);" onclick="sendUrgentReminder('Saepul Bahri')">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>INV-2024-003</td>
                                <td>Budi Santoso</td>
                                <td>Kamar 3</td>
                                <td>Rp 1.200.000</td>
                                <td>10 April 2024</td>
                                <td><span class="status-badge status-paid">Lunas</span></td>
                                <td>
                                    <button class="action-btn" onclick="viewInvoice('INV-2024-003')">Lihat</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
      }

      function getReports() {
        return `
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <h3>Laporan Bulanan</h3>
                        <div class="stat-value">12</div>
                        <div class="stat-subtitle">Laporan tersedia</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <h3>Analisis Penghuni</h3>
                        <div class="stat-value">85%</div>
                        <div class="stat-subtitle">Tingkat retensi</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h3>Trend Pendapatan</h3>
                        <div class="stat-value">+15%</div>
                        <div class="stat-subtitle">Q4 2023 vs Q3 2023</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-trend-up"></i>
                        </div>
                        <h3>Growth Rate</h3>
                        <div class="stat-value">8.5%</div>
                        <div class="stat-subtitle">YoY growth</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h2>Analisis Pendapatan Tahunan</h2>
                    <div class="chart-wrapper">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h2>Distribusi Penghuni Berdasarkan Profesi</h2>
                    <div class="chart-wrapper">
                        <canvas id="occupancyChart"></canvas>
                    </div>
                </div>
            `;
      }

      function getOwnerServices() {
        return `
        <div class="services-page">
            <!-- Left Column - Komplain Aktif Table -->
            <div class="pending-complaints-section">
                <div class="pending-header">
                    <div class="pending-title">
                        <h2>Komplain dan Layanan Aktif</h2>
                    </div>
                </div>
                
                <!-- Stats Cards di atas tabel -->
                <div class="services-stats">
                    <div class="services-stat-card">
                        <h3>Layanan Setelasi</h3>
                        <div class="services-stat-value">12</div>
                        <div class="services-stat-subtitle">Bulan ini</div>
                    </div>
                    
                    <div class="services-stat-card">
                        <h3>Komplain Aktif</h3>
                        <div class="services-stat-value">5</div>
                        <div class="services-stat-subtitle">Perlu Tindakan</div>
                    </div>
                    
                    <div class="services-stat-card">
                        <h3>Rata-rata Waktu</h3>
                        <div class="services-stat-value">2.5</div>
                        <div class="services-stat-subtitle">Hari penyelesaian</div>
                    </div>
                </div>
                
                <table class="complaints-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Penghuni</th>
                            <th>Kamar</th>
                            <th>Jenis</th>
                            <th>Deskripsi</th>
                            <th>Tanggal</th>
                            <th>Prioritas</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Komplain 1 -->
                        <tr>
                            <td class="complaint-id">#Komp-001</td>
                            <td>Ayu Lestari</td>
                            <td>101</td>
                            <td>Perbaikan</td>
                            <td>AC Tidak Dingin</td>
                            <td>25 Mar 2024</td>
                            <td><span class="priority-badge priority-medium">Medium</span></td>
                            <td><span class="status-badge status-processing">Diproses</span></td>
                            <td>
                                <button class="action-btn" onclick="respondToComplaint('#Komp-001')">
                                    Tanggapi
                                </button>
                            </td>
                        </tr>
                        
                        <!-- Komplain 2 -->
                        <tr>
                            <td class="complaint-id">#Komp-002</td>
                            <td>Budi Santoso</td>
                            <td>102</td>
                            <td>Keluhan</td>
                            <td>Kebisingan Tetangga</td>
                            <td>24 Mar 2024</td>
                            <td><span class="priority-badge priority-low">Low</span></td>
                            <td><span class="status-badge status-pending">Menunggu</span></td>
                            <td>
                                <button class="action-btn" onclick="respondToComplaint('#Komp-002')">
                                    Tanggapi
                                </button>
                            </td>
                        </tr>
                        
                        <!-- Komplain 3 -->
                        <tr>
                            <td class="complaint-id">#Komp-003</td>
                            <td>Citra Dewi</td>
                            <td>103</td>
                            <td>Perbaikan</td>
                            <td>Keran Air Bocor</td>
                            <td>23 Mar 2024</td>
                            <td><span class="priority-badge priority-medium">Medium</span></td>
                            <td><span class="status-badge status-processing">Diproses</span></td>
                            <td>
                                <button class="action-btn" onclick="respondToComplaint('#Komp-003')">
                                    Tanggapi
                                </button>
                            </td>
                        </tr>
                        
                        <!-- Komplain 4 -->
                        <tr>
                            <td class="complaint-id">#Komp-004</td>
                            <td>Dedi Setiawan</td>
                            <td>104</td>
                            <td>Permintaan</td>
                            <td>Tambah Kursi</td>
                            <td>22 Mar 2024</td>
                            <td><span class="priority-badge priority-low">Low</span></td>
                            <td><span class="status-badge status-pending">Menunggu</span></td>
                            <td>
                                <button class="action-btn" onclick="respondToComplaint('#Komp-004')">
                                    Tanggapi
                                </button>
                            </td>
                        </tr>
                        
                        <!-- Komplain 5 -->
                        <tr>
                            <td class="complaint-id">#Komp-005</td>
                            <td>Eka Putra</td>
                            <td>105</td>
                            <td>Perbaikan</td>
                            <td>Lampu Kamar Mati</td>
                            <td>21 Mar 2024</td>
                            <td><span class="priority-badge priority-high">High</span></td>
                            <td><span class="status-badge status-processing">Diproses</span></td>
                            <td>
                                <button class="action-btn" onclick="respondToComplaint('#Komp-005')">
                                    Tanggapi
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- User Info Footer -->
                <div style="display: flex; align-items: center; gap: 10px; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                    <div class="user-avatar" style="width: 40px; height: 40px; font-size: 16px; background: linear-gradient(135deg, var(--accent-color), #6C63FF);">RM</div>
                    <div>
                        <div style="font-weight: 600; color: var(--primary-color);">Rendra Maulana</div>
                        <div style="font-size: 12px; color: #666;">Pemilik Kost</div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Chat -->
            <div class="chat-section">
                <div class="chat-header">
                    <h2>Chat dengan Penghuni</h2>
                    <div class="chat-status">
                        <div class="chat-status-dot"></div>
                        <span>Online</span>
                    </div>
                </div>
                
                <div class="chat-messages" id="ownerChatMessages">
                    <!-- Received Message -->
                    <div class="message received">
                        <div class="message-content">
                            Selamat siang! Ada yang bisa kami bantu?
                        </div>
                        <div class="message-time">12.04</div>
                    </div>
                    
                    <!-- Sent Message -->
                    <div class="message sent">
                        <div class="message-content">
                            Siang, Saya mau tanya tentang pembayaran bulan depan
                        </div>
                        <div class="message-time">12.08</div>
                    </div>
                    
                    <!-- Received Message -->
                    <div class="message received">
                        <div class="message-content">
                            Baik, untuk pembayaran bulan April jatuh tempo tanggal 5.<br>
                            Bisa melalui transfer atau saldo kost.
                        </div>
                        <div class="message-time">12.09</div>
                    </div>
                </div>
                
                <div class="chat-input">
                    <input type="text" id="ownerChatInput" placeholder="Ketik pesan..." 
                           onkeypress="if(event.key === 'Enter') sendOwnerChatMessage()">
                    <button onclick="sendOwnerChatMessage()">
                        <i class="fas fa-paper-plane"></i> Kirim
                    </button>
                </div>
            </div>
        </div>
    `;
      }

      function getHelpSupport() {
        return `
                <div class="support-section">
                    <h2>Bantuan & Support</h2>
                    <p style="color: #666; margin-bottom: 20px;">Temukan jawaban untuk pertanyaan umum atau hubungi tim support kami</p>
                    
                    <div class="faq-list">
                        <div class="faq-item" onclick="toggleFAQ(this)">
                            <div class="faq-question">
                                <span>Bagaimana cara menambahkan penghuni baru?</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Untuk menambahkan penghuni baru, buka menu "Kelola Penghuni" lalu klik tombol "Tambah Penghuni". Isi formulir dengan data lengkap penghuni dan simpan.</p>
                            </div>
                        </div>
                        
                        <div class="faq-item" onclick="toggleFAQ(this)">
                            <div class="faq-question">
                                <span>Bagaimana cara membuat tagihan baru?</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Untuk membuat tagihan baru, buka menu "Kelola Keuangan" lalu klik tombol "Buat Tagihan Baru". Pilih penghuni, isi jumlah, dan tentukan tanggal jatuh tempo.</p>
                            </div>
                        </div>
                        
                        <div class="faq-item" onclick="toggleFAQ(this)">
                            <div class="faq-question">
                                <span>Bagaimana cara mengubah status kamar?</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Untuk mengubah status kamar, buka menu "Kelola Kost", cari kamar yang ingin diubah, lalu klik tombol "Detail". Di halaman detail, Anda dapat mengubah status kamar.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="contact-manager-section">
                    <h2>Hubungi Tim Support</h2>
                    <p style="color: #666; margin-bottom: 20px;">Butuh bantuan lebih lanjut? Hubungi tim support kami melalui berbagai cara berikut:</p>
                    
                    <div class="contact-methods">
                        <div class="contact-method">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div class="contact-info">
                                <h4>Telepon</h4>
                                <p>Hubungi kami di <a href="tel:+622112345678">(021) 1234-5678</a></p>
                                <p style="font-size: 12px; color: #999;">Senin-Jumat: 08:00-17:00 WIB</p>
                            </div>
                        </div>
                        
                        <div class="contact-method">
                            <div class="contact-icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="contact-info">
                                <h4>WhatsApp</h4>
                                <p>Chat dengan kami di <a href="https://wa.me/6283478387243">+62-8347-8387-243</a></p>
                                <p style="font-size: 12px; color: #999;">Respon cepat dalam 1-2 jam kerja</p>
                            </div>
                        </div>
                        
                        <div class="contact-method">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="contact-info">
                                <h4>Email</h4>
                                <p>Kirim email ke <a href="mailto:support@kostku.com">support@kostku.com</a></p>
                                <p style="font-size: 12px; color: #999;">Respon dalam 24 jam kerja</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
      }

      function getTenantDashboard() {
        return `
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <h3>Tagihan Bulan Ini</h3>
                        <div class="stat-value">Rp 850.000</div>
                        <div class="stat-subtitle">Jatuh tempo: 5 April 2024</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3>Kamar Anda</h3>
                        <div class="stat-value">101</div>
                        <div class="stat-subtitle">Tipe: Standar</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <h3>Saldo Kost</h3>
                        <div class="stat-value">Rp 1.200.000</div>
                        <div class="stat-subtitle">Tersedia untuk pembayaran</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Sisa Kontrak</h3>
                        <div class="stat-value">45</div>
                        <div class="stat-subtitle">Hari</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h2>Pengeluaran Bulanan</h2>
                    <div class="chart-wrapper">
                        <canvas id="spendingChart"></canvas>
                    </div>
                </div>
                
                <div class="notification-list">
                    <h2>Notifikasi Terbaru</h2>
                    <div class="notification-item unread" onclick="markAsRead(1)">
                        <div class="notification-icon-small success">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="notification-content">
                            <h4>PEMBAYARAN BULAN MARET BERHASIL</h4>
                            <p>Pembayaran Anda untuk bulan Maret telah berhasil diterima</p>
                            <div class="notification-time">10 menit yang lalu</div>
                        </div>
                    </div>
                    <div class="notification-item unread" onclick="markAsRead(2)">
                        <div class="notification-icon-small info">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="notification-content">
                            <h4>TAGIHAN BULAN APRIL TELAH TERSEDIA</h4>
                            <p>Tagihan untuk bulan April sudah dapat diakses di menu Pembayaran</p>
                            <div class="notification-time">1 jam yang lalu</div>
                        </div>
                    </div>
                </div>
            `;
      }

      function getRoomContract() {
        return `
                <div class="profile-section" style="margin-bottom: 30px;">
                    <h2>Kamar & Kontrak Kost</h2>
                    <p style="color: #666; margin-bottom: 20px;">Informasi detail Kamar dan Kontrak anda</p>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <h3 style="color: var(--primary-color); margin-bottom: 10px;">Fasilitas Kamar</h3>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                <div style="background: var(--light-blue); padding: 10px; border-radius: 8px; text-align: center;">
                                    <i class="fas fa-wifi" style="color: var(--accent-color); margin-bottom: 5px;"></i>
                                    <div style="font-size: 12px;">WIFI</div>
                                </div>
                                <div style="background: var(--light-blue); padding: 10px; border-radius: 8px; text-align: center;">
                                    <i class="fas fa-bolt" style="color: var(--accent-color); margin-bottom: 5px;"></i>
                                    <div style="font-size: 12px;">Listrik</div>
                                </div>
                                <div style="background: var(--light-blue); padding: 10px; border-radius: 8px; text-align: center;">
                                    <i class="fas fa-tint" style="color: var(--accent-color); margin-bottom: 5px;"></i>
                                    <div style="font-size: 12px;">Air</div>
                                </div>
                                <div style="background: var(--light-blue); padding: 10px; border-radius: 8px; text-align: center;">
                                    <i class="fas fa-snowflake" style="color: var(--accent-color); margin-bottom: 5px;"></i>
                                    <div style="font-size: 12px;">AC</div>
                                </div>
                                <div style="background: var(--light-blue); padding: 10px; border-radius: 8px; text-align: center;">
                                    <i class="fas fa-bath" style="color: var(--accent-color); margin-bottom: 5px;"></i>
                                    <div style="font-size: 12px;">Kamar Mandi</div>
                                </div>
                                <div style="background: var(--light-blue); padding: 10px; border-radius: 8px; text-align: center;">
                                    <i class="fas fa-bed" style="color: var(--accent-color); margin-bottom: 5px;"></i>
                                    <div style="font-size: 12px;">Kasur</div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h3 style="color: var(--primary-color); margin-bottom: 10px;">Aturan Kost</h3>
                            <ul style="padding-left: 20px; color: #666;">
                                <li style="margin-bottom: 8px;">Tidak boleh membawa tamu menginap</li>
                                <li style="margin-bottom: 8px;">Batas waktu kembali: 23.00 WIB</li>
                                <li style="margin-bottom: 8px;">Dilarang merokok di dalam kamar</li>
                                <li style="margin-bottom: 8px;">Pembayaran dilakukan setiap tanggal 5</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="table-container">
                    <h2>Detail Kontrak</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Detail</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>No. Kontrak</td>
                                <td>KTR-2023-101</td>
                                <td><span class="status-badge status-active">Aktif</span></td>
                            </tr>
                            <tr>
                                <td>Durasi</td>
                                <td>12 Bulan (15 Jan 2023 - 14 Jan 2024)</td>
                                <td><span class="status-badge status-active">Berjalan</span></td>
                            </tr>
                            <tr>
                                <td>Deposit</td>
                                <td>Rp 1.700.000</td>
                                <td><span class="status-badge status-paid">Dibayar</span></td>
                            </tr>
                            <tr>
                                <td>Pembayaran Terakhir</td>
                                <td>15 Maret 2024 (Rp 850.000)</td>
                                <td><span class="status-badge status-paid">Lunas</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
      }

      function getBalanceInfo() {
        return `
                <div class="profile-section" style="margin-bottom: 30px;">
                    <h2>INFORMASI SALDO</h2>
                    <p style="color: #666; margin-bottom: 20px;">Kelola dan pantau saldo Anda</p>
                    
                    <div style="text-align: center; padding: 30px; background: linear-gradient(135deg, var(--primary-color), #2a1f9c); border-radius: 15px; color: white; margin-bottom: 30px;">
                        <div style="font-size: 14px; margin-bottom: 10px;">Saldo Tersedia</div>
                        <div style="font-size: 48px; font-weight: 700;">Rp 1.200.000</div>
                        <div style="font-size: 14px; opacity: 0.8;">Update terakhir: 15 Maret 2024</div>
                    </div>
                    
                    <button class="primary-btn" style="width: 100%; margin-bottom: 20px;" onclick="showTopUpModal()">
                        <i class="fas fa-plus"></i> Top Up Saldo
                    </button>
                </div>
                
                <div class="table-container">
                    <h2>Riwayat Transaksi</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Tanggal</th>
                                <th>Deskripsi</th>
                                <th>Tipe</th>
                                <th>Jumlah</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>10/3/2024</td>
                                <td>Pembayaran Sewa Maret</td>
                                <td>Pengeluaran</td>
                                <td style="color: var(--danger-color); font-weight: 600;">- Rp 850.000</td>
                                <td><span class="status-badge status-paid"> Berhasil</span></td>
                            </tr>
                            <tr>
                                <td>5/3/2024</td>
                                <td>Pembayaran Listrik</td>
                                <td>Pengeluaran</td>
                                <td style="color: var(--danger-color); font-weight: 600;">- Rp 150.000</td>
                                <td><span class="status-badge status-paid"> Berhasil</span></td>
                            </tr>
                            <tr>
                                <td>28/2/2024</td>
                                <td>Refund Deposit</td>
                                <td>Pemasukan</td>
                                <td style="color: var(--success-color); font-weight: 600;">+ Rp 1.500.000</td>
                                <td><span class="status-badge status-paid"> Berhasil</span></td>
                            </tr>
                            <tr>
                                <td>15/2/2024</td>
                                <td>Pembayaran Sewa Februari</td>
                                <td>Pengeluaran</td>
                                <td style="color: var(--danger-color); font-weight: 600;">- Rp 850.000</td>
                                <td><span class="status-badge status-paid"> Berhasil</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
      }

      function getPayment() {
        return `
                <div class="profile-section" style="margin-bottom: 30px;">
                    <h2>PEMBAYARAN & TAGIHAN</h2>
                    
                    <div style="text-align: center; padding: 30px; background: linear-gradient(135deg, var(--accent-color), #6C63FF); border-radius: 15px; color: white; margin-bottom: 30px;">
                        <div style="font-size: 14px; margin-bottom: 10px;">Total Tagihan Bulan Ini</div>
                        <div style="font-size: 48px; font-weight: 700;">Rp 850.000</div>
                        <div style="font-size: 14px; opacity: 0.8;">Jatuh tempo: 5 April 2024</div>
                    </div>
                    
                    <div class="payment-methods">
                        <div class="payment-method active" onclick="selectPaymentMethod('transfer')">
                            <i class="fas fa-university"></i>
                            <span>Transfer Bank</span>
                        </div>
                        <div class="payment-method" onclick="selectPaymentMethod('saldo')">
                            <i class="fas fa-wallet"></i>
                            <span>Saldo Kost</span>
                        </div>
                        <div class="payment-method" onclick="selectPaymentMethod('qris')">
                            <i class="fas fa-qrcode"></i>
                            <span>QRIS</span>
                        </div>
                        <div class="payment-method" onclick="selectPaymentMethod('virtual')">
                            <i class="fas fa-credit-card"></i>
                            <span>Virtual Account</span>
                        </div>
                    </div>
                    
                    <button class="primary-btn" style="width: 100%; margin-top: 20px;" onclick="processPayment()">
                        <i class="fas fa-credit-card"></i> Bayar Sekarang
                    </button>
                </div>
                
                <div class="table-container">
                    <h2>Daftar Tagihan</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Deskripsi</th>
                                <th>Jumlah</th>
                                <th>Jatuh Tempo</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Sewa Kamar April 2024</td>
                                <td>Rp 850.000</td>
                                <td>5 April 2024</td>
                                <td><span class="status-badge status-unpaid">Belum Bayar</span></td>
                                <td><button class="action-btn" onclick="payBill(1)">Bayar</button></td>
                            </tr>
                            <tr>
                                <td>Listrik Maret 2024</td>
                                <td>Rp 150.000</td>
                                <td>28 Maret 2024</td>
                                <td><span class="status-badge status-paid">Lunas</span></td>
                                <td><button class="action-btn" disabled>Sudah Bayar</button></td>
                            </tr>
                            <tr>
                                <td>Air Maret 2024</td>
                                <td>Rp 50.000</td>
                                <td>28 Maret 2024</td>
                                <td><span class="status-badge status-paid">Lunas</span></td>
                                <td><button class="action-btn" disabled>Sudah Bayar</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
      }

      function getSearchKost() {
        return `
                <div class="search-bar">
                    <input type="text" placeholder="Cari kost berdasarkan lokasi, harga, atau fasilitas...">
                    <button class="primary-btn">
                        <i class="fas fa-search"></i> Cari
                    </button>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px;">
                    ${[1, 2, 3, 4]
                      .map(
                        (i) => `
                        <div class="profile-section">
                            <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" class="room-image">
                            <h3 style="margin-bottom: 10px;">Kost Sejahtera ${i}</h3>
                            <div style="color: #666; margin-bottom: 15px; font-size: 14px;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <i class="fas fa-map-marker-alt"></i> Jl. Contoh No. ${i}, Jakarta
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-tag"></i> Rp ${(800 + i * 100).toFixed(3)}.000 / bulan
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button class="primary-btn" style="flex: 1;" onclick="showKostDetail(${i})">
                                    <i class="fas fa-eye"></i> Detail
                                </button>
                                <button class="secondary-btn" onclick="addToFavorites(${i})">
                                    <i class="fas fa-heart"></i>
                                </button>
                            </div>
                        </div>
                    `,
                      )
                      .join("")}
                </div>
            `;
      }

      function getFavorites() {
        return `
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px;">
                    ${[1, 2]
                      .map(
                        (i) => `
                        <div class="profile-section">
                            <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" class="room-image">
                            <h3 style="margin-bottom: 10px;">Kost Favorit ${i}</h3>
                            <div style="color: #666; margin-bottom: 15px; font-size: 14px;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                                    <i class="fas fa-map-marker-alt"></i> Lokasi Strategis
                                </div>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <i class="fas fa-tag"></i> Rp ${(900 + i * 100).toFixed(3)}.000 / bulan
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button class="primary-btn" style="flex: 1;" onclick="showKostDetail(${i})">
                                    <i class="fas fa-eye"></i> Detail
                                </button>
                                <button class="secondary-btn" style="background: var(--danger-color); color: white; border-color: var(--danger-color);" onclick="removeFromFavorites(${i})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `,
                      )
                      .join("")}
                </div>
            `;
      }

      function getTenantServices() {
        return `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div>
                        <div class="contact-manager-section">
                            <h2>Kontak Pengelola</h2>
                            <div class="contact-methods">
                                <div class="contact-method">
                                    <div class="contact-icon">
                                        <i class="fas fa-phone"></i>
                                    </div>
                                    <div class="contact-info">
                                        <h4>Telepon</h4>
                                        <p><a href="tel:+622112345678">(021) 1234-5678</a></p>
                                    </div>
                                </div>
                                
                                <div class="contact-method">
                                    <div class="contact-icon">
                                        <i class="fab fa-whatsapp"></i>
                                    </div>
                                    <div class="contact-info">
                                        <h4>WhatsApp</h4>
                                        <p><a href="https://wa.me/6283478387243">+62-8347-8387-243</a></p>
                                    </div>
                                </div>
                                
                                <div class="contact-method">
                                    <div class="contact-icon">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                    <div class="contact-info">
                                        <h4>Email</h4>
                                        <p><a href="mailto:support@kostku.com">Support@kostku.com</a></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-problem-section">
                            <h2>Laporkan Masalah</h2>
                            <div class="problem-type-selector">
                                <div class="problem-type-option" onclick="selectProblemType('perbaikan', this)">
                                    <div class="problem-type-icon">
                                        <i class="fas fa-tools"></i>
                                    </div>
                                    <div class="problem-type-info">
                                        <h4>Perbaikan</h4>
                                        <p>AC rusak, keran bocor, listrik mati</p>
                                    </div>
                                </div>
                                
                                <div class="problem-type-option" onclick="selectProblemType('keluhan', this)">
                                    <div class="problem-type-icon">
                                        <i class="fas fa-comment-alt"></i>
                                    </div>
                                    <div class="problem-type-info">
                                        <h4>Keluhan</h4>
                                        <p>Kebisingan, kebersihan, keamanan</p>
                                    </div>
                                </div>
                                
                                <div class="problem-type-option" onclick="selectProblemType('permintaan', this)">
                                    <div class="problem-type-icon">
                                        <i class="fas fa-lightbulb"></i>
                                    </div>
                                    <div class="problem-type-info">
                                        <h4>Permintaan</h4>
                                        <p>Tambah fasilitas, pindah kamar</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Deskripsi Masalah:</label>
                                <textarea id="problemDescription" placeholder="Jelaskan masalah Anda..."></textarea>
                            </div>
                            
                            <button class="primary-btn" style="width: 100%;" onclick="submitProblemReport()">
                                <i class="fas fa-paper-plane"></i> Kirim Laporan
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-section">
                        <div class="chat-header">
                            <h2>Chat dengan Pengguna</h2>
                            <div class="chat-status">
                                <div class="chat-status-dot"></div>
                                <span>Online</span>
                            </div>
                        </div>
                        
                        <div class="chat-messages" id="tenantChatMessages">
                            <div class="message received">
                                <div class="message-sender">Pengelola</div>
                                <div class="message-content">Selamat siang! Ada yang bisa kami bantu?</div>
                            </div>
                            <div class="message sent">
                                <div class="message-sender">Anda</div>
                                <div class="message-content">Saya mau tanya tentang pembayaran bulan depan</div>
                            </div>
                            <div class="message received">
                                <div class="message-sender">Pengelola</div>
                                <div class="message-content">Baik, untuk pembayaran bulan April jatuh tempo tanggal 5. Bisa melalui transfer atau saldo kost.</div>
                            </div>
                            <div class="message sent">
                                <div class="message-sender">Anda</div>
                                <div class="message-content">Baik, terima kasih informasinya</div>
                            </div>
                        </div>
                        
                        <div class="chat-input">
                            <input type="text" id="tenantChatInput" placeholder="Ketik pesan...">
                            <button onclick="sendTenantChatMessage()">
                                <i class="fas fa-paper-plane"></i> Kirim
                            </button>
                        </div>
                    </div>
                </div>
            `;
      }

      // NEW FUNCTION: Edit Profile Modal
      function showEditProfileModal(userType) {
        const modalHTML = `
                <div class="modal active">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Edit Profil ${userType === "owner" ? "Pemilik" : "Penghuni"}</h2>
                            <button class="close-btn" onclick="closeModal()">&times;</button>
                        </div>
                        <div class="form-group">
                            <label>Nama Lengkap:</label>
                            <input type="text" value="${userType === "owner" ? "Rendra Maulana" : "Ayu Lestari"}">
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" value="${userType === "owner" ? "rendra@kostsejahtera.com" : "ayu.lestari@yahoo.com"}">
                        </div>
                        <div class="form-group">
                            <label>No. Telepon:</label>
                            <input type="tel" value="0812-3456-7890">
                        </div>
                        ${
                          userType === "tenant"
                            ? `
                            <div class="form-group">
                                <label>Kontak Darurat:</label>
                                <input type="tel" value="0895-2345-4678">
                            </div>
                            <div class="form-group">
                                <label>Hubungan:</label>
                                <input type="text" value="Ibu Kandung">
                            </div>
                        `
                            : ""
                        }
                        <div class="form-group">
                            <label>Alamat:</label>
                            <textarea>${userType === "owner" ? "Jl. Kenanga No. 45, Bandung" : "Kamar 101, Kost Sejahtera Abadi"}</textarea>
                        </div>
                        <div class="form-actions">
                            <button class="secondary-btn" onclick="closeModal()">Batal</button>
                            <button class="primary-btn" onclick="saveProfile('${userType}')">Simpan Perubahan</button>
                        </div>
                    </div>
                </div>
            `;

        document.getElementById("modalContainer").innerHTML = modalHTML;
        showNotification("info", "Edit Profil", "Membuka form edit profil");
      }

      // NEW FUNCTION: Save Profile
      function saveProfile(userType) {
        showNotification(
          "success",
          "Profil Diperbarui",
          "Perubahan profil berhasil disimpan",
        );
        closeModal();
      }

      // Helper Functions
      function toggleCheckbox(element) {
        element.classList.toggle("checked");
        if (element.classList.contains("checked")) {
          showNotification(
            "success",
            "Tagihan Dipilih",
            "Tagihan telah ditandai untuk diproses",
          );
        }
      }

      function showCreateInvoiceModal() {
        const modalHTML = `
                <div class="modal active">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Tambah Tagihan Baru</h2>
                            <button class="close-btn" onclick="closeModal()">&times;</button>
                        </div>
                        <div class="form-group">
                            <label>Pilih Penghuni:</label>
                            <select>
                                <option>Ayu Lestari (Kamar 101)</option>
                                <option>Saepul Bahri (Kamar 8)</option>
                                <option>Budi Santoso (Kamar 102)</option>
                                <option>Citra Dewi (Kamar 103)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Jenis Tagihan:</label>
                            <select>
                                <option>Sewa Kamar</option>
                                <option>Listrik</option>
                                <option>Air</option>
                                <option>Internet</option>
                                <option>Lainnya</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Jumlah:</label>
                            <input type="text" placeholder="Rp 0">
                        </div>
                        <div class="form-group">
                            <label>Tanggal Jatuh Tempo:</label>
                            <input type="date">
                        </div>
                        <div class="form-group">
                            <label>Keterangan (opsional):</label>
                            <textarea placeholder="Tambahkan keterangan tagihan..."></textarea>
                        </div>
                        <div class="form-actions">
                            <button class="secondary-btn" onclick="closeModal()">Batal</button>
                            <button class="primary-btn" onclick="createInvoice()">Buat Tagihan</button>
                        </div>
                    </div>
                </div>
            `;

        document.getElementById("modalContainer").innerHTML = modalHTML;
        showNotification(
          "info",
          "Buat Tagihan",
          "Membuka form pembuatan tagihan baru",
        );
      }

      function createInvoice() {
        showNotification(
          "success",
          "Tagihan Dibuat",
          "Tagihan baru berhasil dibuat",
        );
        closeModal();
      }

      function showAddRoomModal() {
        const modal = document.getElementById("addRoomModal");
        if (modal) {
          modal.classList.add("active");
          modal.style.display = "flex";
          showNotification("info", "Tambah Kamar", "Membuka form tambah kamar");
        }
      }

      function closeAddRoomModal() {
        const modal = document.getElementById("addRoomModal");
        if (modal) {
          modal.classList.remove("active");
          setTimeout(() => {
            modal.style.display = "none";
          }, 300);
        }
      }

      function showRoomDetail(roomNumber) {
        showNotification(
          "info",
          "Detail Kamar",
          `Melihat detail kamar ${roomNumber}`,
        );
      }

      function showAddTenantModal() {
        const modal = document.getElementById("addTenantModal");
        if (modal) {
          modal.classList.add("active");
          modal.style.display = "flex";

          // Reset form dan tab
          resetTenantForm();
          showNotification(
            "info",
            "Tambah Penghuni",
            "Membuka form tambah penghuni baru",
          );
        }
      }

      function closeAddTenantModal() {
        const modal = document.getElementById("addTenantModal");
        if (modal) {
          modal.classList.remove("active");
          setTimeout(() => {
            modal.style.display = "none";
          }, 300);
          currentTab = 1; // Reset ke tab pertama
        }
      }

      function showTenantDetail(tenantName) {
        showNotification(
          "info",
          "Detail Penghuni",
          `Melihat detail ${tenantName}`,
        );
      }

      function viewInvoice(invoiceNumber) {
        showNotification(
          "info",
          "Lihat Tagihan",
          `Melihat detail tagihan ${invoiceNumber}`,
        );
      }

      function sendReminder(tenantName) {
        showNotification(
          "warning",
          "Pengingat",
          `Mengirim pengingat ke ${tenantName}`,
        );
      }

      function sendUrgentReminder(tenantName) {
        showNotification(
          "error",
          "Pengingat Mendesak",
          `Mengirim pengingat mendesak ke ${tenantName}`,
        );
      }

      function respondToComplaint(complaintId) {
        showNotification(
          "info",
          "Tanggapi Komplain",
          `Menanggapi komplain ${complaintId}`,
        );
      }

      function toggleFAQ(element) {
        element.classList.toggle("active");
      }

      function showForgotPasswordModal() {
        const modalHTML = `
                <div class="modal active">
                    <div class="modal-content" style="max-width: 400px;">
                        <div class="modal-header">
                            <h2>Lupa Password</h2>
                            <button class="close-btn" onclick="closeModal()">&times;</button>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="resetEmail" placeholder="Masukkan email Anda">
                        </div>
                        <div class="form-actions">
                            <button class="primary-btn" onclick="resetPassword()">Reset Password</button>
                        </div>
                    </div>
                </div>
            `;

        document.getElementById("modalContainer").innerHTML = modalHTML;
        showNotification(
          "info",
          "Lupa Password",
          "Membuka form reset password",
        );
      }

      function resetPassword() {
        const email = document.getElementById("resetEmail").value;
        if (email) {
          showNotification(
            "success",
            "Reset Password",
            "Link reset password telah dikirim ke email Anda",
          );
          closeModal();
        } else {
          showNotification(
            "error",
            "Reset Password",
            "Harap masukkan email Anda",
          );
        }
      }

      function sendTenantChatMessage() {
        const input = document.getElementById("tenantChatInput");
        const messages = document.getElementById("tenantChatMessages");

        if (input.value.trim()) {
          const messageDiv = document.createElement("div");
          messageDiv.className = "message sent";
          messageDiv.innerHTML = `
                    <div class="message-sender">Anda</div>
                    <div class="message-content">${input.value}</div>
                `;
          messages.appendChild(messageDiv);
          input.value = "";
          messages.scrollTop = messages.scrollHeight;
          showNotification("success", "Chat", "Pesan terkirim ke pengelola");
        }
      }

      function selectPaymentMethod(method) {
        document
          .querySelectorAll(".payment-method")
          .forEach((el) => el.classList.remove("active"));
        event.target.closest(".payment-method").classList.add("active");
        showNotification(
          "info",
          "Metode Pembayaran",
          `Metode ${method} dipilih`,
        );
      }

      function processPayment() {
        showNotification(
          "success",
          "Pembayaran",
          "Pembayaran sedang diproses...",
        );
        setTimeout(() => {
          showNotification(
            "success",
            "Pembayaran Berhasil",
            "Pembayaran sewa bulan April berhasil",
          );
        }, 2000);
      }

      function payBill(id) {
        showNotification("info", "Pembayaran", `Membayar tagihan #${id}`);
        setTimeout(() => {
          showNotification(
            "success",
            "Pembayaran Berhasil",
            `Tagihan #${id} berhasil dibayar`,
          );
        }, 1500);
      }

      function showTopUpModal() {
        showNotification("info", "Top Up Saldo", "Membuka form top up saldo");
      }

      function showKostDetail(id) {
        showNotification("info", "Detail Kost", `Melihat detail kost ${id}`);
      }

      function addToFavorites(id) {
        showNotification(
          "success",
          "Favorit",
          `Kost ${id} ditambahkan ke favorit`,
        );
      }

      function removeFromFavorites(id) {
        showNotification(
          "warning",
          "Favorit",
          `Kost ${id} dihapus dari favorit`,
        );
      }

      function selectProblemType(type, element) {
        document
          .querySelectorAll(".problem-type-option")
          .forEach((el) => el.classList.remove("selected"));
        element.classList.add("selected");
        showNotification(
          "info",
          "Jenis Masalah",
          `Memilih jenis masalah: ${type}`,
        );
      }

      function submitProblemReport() {
        const description = document.getElementById("problemDescription").value;
        if (description.trim()) {
          showNotification(
            "success",
            "Laporan Dikirim",
            "Laporan masalah Anda telah dikirim ke pengelola",
          );
          document.getElementById("problemDescription").value = "";
          document
            .querySelectorAll(".problem-type-option")
            .forEach((el) => el.classList.remove("selected"));
        } else {
          showNotification(
            "error",
            "Laporan Gagal",
            "Harap isi deskripsi masalah",
          );
        }
      }

      // ============================================
      // FUNGSI UNTUK TAMBAH KAMAR
      // ============================================

      // Fungsi untuk menyimpan data kamar baru
      window.saveNewRoom = function (event) {
        if (event) {
          event.preventDefault();
          event.stopPropagation();
        }

        // Ambil data dari form
        const roomData = {
          number: document.getElementById("roomNumber").value,
          type: document.getElementById("roomType").value,
          length: document.getElementById("roomLength").value,
          width: document.getElementById("roomWidth").value,
          price: document.getElementById("roomPrice").value,
          facilities: getSelectedFacilities(),
          status: document.getElementById("roomStatus").value,
          description: document.getElementById("roomDescription").value,
          dateAdded: new Date().toLocaleDateString("id-ID"),
        };

        // Validasi data
        if (
          !roomData.number ||
          !roomData.type ||
          !roomData.length ||
          !roomData.width ||
          !roomData.price
        ) {
          showNotification(
            "error",
            "Data Tidak Lengkap",
            "Harap isi semua field yang wajib diisi (*)",
          );
          return false;
        }

        // Simulasi penyimpanan berhasil
        showNotification(
          "success",
          "Kamar Berhasil Ditambahkan",
          `Kamar ${roomData.number} (${roomData.type}) berhasil ditambahkan dengan harga Rp ${formatCurrency(roomData.price)}/bulan`,
        );

        // Reset form
        document.getElementById("addRoomForm").reset();

        // Tutup modal
        closeAddRoomModal();

        return false;
      };

      // Fungsi untuk mendapatkan fasilitas yang dipilih
      function getSelectedFacilities() {
        const checkboxes = document.querySelectorAll(
          'input[name="facilities"]:checked',
        );
        const facilities = [];
        checkboxes.forEach((checkbox) => {
          facilities.push(checkbox.value);
        });
        return facilities;
      }

      // ============================================
      // FUNGSI UNTUK TAMBAH PENGHUNI
      // ============================================

      // Variabel global untuk tab
      let currentTab = 1;
      const totalTabs = 3;

      // Fungsi untuk switch tab
      window.switchTab = function (tabNumber) {
        currentTab = tabNumber;

        // Sembunyikan semua tab content
        document.querySelectorAll(".tab-content").forEach((tab) => {
          tab.classList.remove("active");
        });

        // Nonaktifkan semua tab button
        document.querySelectorAll(".tab-btn").forEach((btn) => {
          btn.classList.remove("active");
        });

        // Tampilkan tab yang dipilih
        document.getElementById(`tab${tabNumber}`).classList.add("active");
        document
          .querySelectorAll(".tab-btn")
          [tabNumber - 1].classList.add("active");

        // Update tombol navigasi
        updateTabButtons();
      };

      // Fungsi untuk ke tab berikutnya
      window.nextTab = function () {
        if (currentTab < totalTabs) {
          // Validasi tab saat ini sebelum lanjut
          if (validateCurrentTab()) {
            switchTab(currentTab + 1);
          }
        }
      };

      // Fungsi untuk ke tab sebelumnya
      window.previousTab = function () {
        if (currentTab > 1) {
          switchTab(currentTab - 1);
        }
      };

      // Fungsi untuk update tombol tab
      function updateTabButtons() {
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const submitBtn = document.getElementById("submitBtn");

        if (prevBtn && nextBtn && submitBtn) {
          // Tombol Sebelumnya
          if (currentTab > 1) {
            prevBtn.style.display = "inline-block";
          } else {
            prevBtn.style.display = "none";
          }

          // Tombol Selanjutnya/Simpan
          if (currentTab < totalTabs) {
            nextBtn.style.display = "inline-block";
            submitBtn.style.display = "none";
          } else {
            nextBtn.style.display = "none";
            submitBtn.style.display = "inline-block";
          }
        }
      }

      // Fungsi untuk validasi tab
      function validateCurrentTab() {
        let isValid = true;
        let errorMessage = "";

        switch (currentTab) {
          case 1: // Data Pribadi
            if (!document.getElementById("tenantName").value) {
              isValid = false;
              errorMessage = "Nama lengkap harus diisi";
            } else if (!document.getElementById("tenantNIK").value) {
              isValid = false;
              errorMessage = "NIK harus diisi";
            } else if (!document.getElementById("tenantBirthplace").value) {
              isValid = false;
              errorMessage = "Tempat lahir harus diisi";
            }
            break;

          case 2: // Data Kontrak
            if (!document.getElementById("tenantRoom").value) {
              isValid = false;
              errorMessage = "Pilih kamar terlebih dahulu";
            } else if (!document.getElementById("contractStart").value) {
              isValid = false;
              errorMessage = "Tanggal mulai kontrak harus diisi";
            }
            break;
        }

        if (!isValid) {
          showNotification("error", "Validasi Gagal", errorMessage);
        }

        return isValid;
      }

      // Fungsi untuk menyimpan data penghuni baru
      window.saveNewTenant = function (event) {
        if (event) {
          event.preventDefault();
          event.stopPropagation();
        }

        // Validasi tab terakhir
        if (!validateCurrentTab()) {
          return false;
        }

        // Kumpulkan semua data
        const tenantData = {
          // Data Pribadi
          name: document.getElementById("tenantName").value,
          nik: document.getElementById("tenantNIK").value,
          birthplace: document.getElementById("tenantBirthplace").value,
          birthdate: document.getElementById("tenantBirthdate").value,
          gender: document.getElementById("tenantGender").value,
          occupation: document.getElementById("tenantOccupation").value,

          // Data Kontrak
          room: document.getElementById("tenantRoom").value,
          contractStart: document.getElementById("contractStart").value,
          contractEnd: document.getElementById("contractEnd").value,
          monthlyRent: document.getElementById("monthlyRent").value,
          deposit: document.getElementById("deposit").value,
          paymentMethod: document.getElementById("paymentMethod").value,

          // Kontak & Darurat
          email: document.getElementById("tenantEmail").value,
          phone: document.getElementById("tenantPhone").value,
          address: document.getElementById("tenantAddress").value,
          emergencyName: document.getElementById("emergencyName").value,
          emergencyRelation: document.getElementById("emergencyRelation").value,
          emergencyPhone: document.getElementById("emergencyPhone").value,
          emergencyAddress: document.getElementById("emergencyAddress").value,

          // Metadata
          joinDate: new Date().toLocaleDateString("id-ID"),
          status: "active",
          tenantCode: generateTenantCode(),
        };

        // Simulasi penyimpanan berhasil
        showNotification(
          "success",
          "Penghuni Berhasil Ditambahkan",
          `${tenantData.name} berhasil ditambahkan sebagai penghuni Kamar ${tenantData.room}`,
        );

        // Reset form
        resetTenantForm();

        // Tutup modal
        closeAddTenantModal();

        return false;
      };

      // Fungsi untuk reset form penghuni
      function resetTenantForm() {
        if (document.getElementById("addTenantForm")) {
          document.getElementById("addTenantForm").reset();
          currentTab = 1;
          switchTab(1);

          // Set tanggal default untuk kontrak
          const today = new Date();
          const nextYear = new Date(today);
          nextYear.setFullYear(today.getFullYear() + 1);

          document.getElementById("contractStart").valueAsDate = today;
          document.getElementById("contractEnd").valueAsDate = nextYear;

          // Set default values
          document.getElementById("monthlyRent").value = "850000";
          document.getElementById("deposit").value = "1700000";
        }
      }

      // Fungsi untuk generate kode penghuni
      function generateTenantCode() {
        const prefix = "TNT";
        const randomNum = Math.floor(Math.random() * 10000)
          .toString()
          .padStart(4, "0");
        const year = new Date().getFullYear().toString().substr(-2);
        return `${prefix}${year}${randomNum}`;
      }

      // Fungsi untuk format currency
      function formatCurrency(amount) {
        return new Intl.NumberFormat("id-ID").format(amount);
      }

      // Fungsi untuk kirim chat owner
      function sendOwnerChatMessage() {
        const input = document.getElementById("ownerChatInput");
        const messages = document.getElementById("ownerChatMessages");

        if (input.value.trim()) {
          const messageDiv = document.createElement("div");
          messageDiv.className = "message sent";
          messageDiv.innerHTML = `
                    <div class="message-content">${input.value}</div>
                    <div class="message-time">${new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>
                `;
          messages.appendChild(messageDiv);
          input.value = "";
          messages.scrollTop = messages.scrollHeight;
          showNotification("success", "Chat", "Pesan terkirim ke penghuni");
        }
      }

      // Make functions globally available
      window.closeModal = closeModal;
      window.showNotification = showNotification;
      window.markAsRead = markAsRead;
      window.markAllAsRead = markAllAsRead;
      window.sendTenantChatMessage = sendTenantChatMessage;
      window.sendOwnerChatMessage = sendOwnerChatMessage;
      window.selectPaymentMethod = selectPaymentMethod;
      window.processPayment = processPayment;
      window.payBill = payBill;
      window.toggleCheckbox = toggleCheckbox;
      window.showCreateInvoiceModal = showCreateInvoiceModal;
      window.createInvoice = createInvoice;
      window.toggleFAQ = toggleFAQ;
      window.selectProblemType = selectProblemType;
      window.submitProblemReport = submitProblemReport;
      window.showEditProfileModal = showEditProfileModal;
      window.saveProfile = saveProfile;
      window.showAddRoomModal = showAddRoomModal;
      window.closeAddRoomModal = closeAddRoomModal;
      window.showAddTenantModal = showAddTenantModal;
      window.closeAddTenantModal = closeAddTenantModal;
      window.switchTab = switchTab;
      window.nextTab = nextTab;
      window.previousTab = previousTab;
    </script>
  </body>
</html>